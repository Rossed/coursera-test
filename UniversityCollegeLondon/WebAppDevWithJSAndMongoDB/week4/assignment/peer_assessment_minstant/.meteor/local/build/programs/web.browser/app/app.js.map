{"version":3,"sources":["meteor://ðŸ’»app/client/template.minstant.js","meteor://ðŸ’»app/client/main.js","meteor://ðŸ’»app/lib/collections.js","meteor://ðŸ’»app/shared/main.js"],"names":[],"mappings":";;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0G;;;;;;;;;;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","file":"/app.js","sourcesContent":["\nTemplate.body.addContent((function() {\n  var view = this;\n  return \"\";\n}));\nMeteor.startup(Template.body.renderToDocument);\n\nTemplate.__checkName(\"ApplicationLayout\");\nTemplate[\"ApplicationLayout\"] = new Template(\"Template.ApplicationLayout\", (function() {\n  var view = this;\n  return [ Blaze._TemplateWith(function() {\n    return \"header\";\n  }, function() {\n    return Spacebars.include(view.lookupTemplate(\"yield\"));\n  }), \"\\n\t\\n\t\", HTML.DIV({\n    \"class\": \"container\"\n  }, \"\\n\t\", Blaze._TemplateWith(function() {\n    return \"main\";\n  }, function() {\n    return Spacebars.include(view.lookupTemplate(\"yield\"));\n  }), \"\\n\t\") ];\n}));\n\nTemplate.__checkName(\"navbar\");\nTemplate[\"navbar\"] = new Template(\"Template.navbar\", (function() {\n  var view = this;\n  return HTML.NAV({\n    \"class\": \"navbar navbar-default\"\n  }, \"\\n  \", HTML.DIV({\n    \"class\": \"container-fluid\"\n  }, \"\\n    \", HTML.Raw('<div class=\"navbar-header\">\\n      <a class=\"navbar-brand\" href=\"/\">\\n        Minstant!\\n      </a>\\n    </div>'), \"\\n    \", HTML.DIV({\n    \"class\": \"nav navbar-nav navbar-right\"\n  }, \"\\n    \", Spacebars.include(view.lookupTemplate(\"loginButtons\")), \"\\n\"), \"\\n  \"), \"\\n\");\n}));\n\nTemplate.__checkName(\"lobby_page\");\nTemplate[\"lobby_page\"] = new Template(\"Template.lobby_page\", (function() {\n  var view = this;\n  return Spacebars.include(view.lookupTemplate(\"available_user_list\"));\n}));\n\nTemplate.__checkName(\"available_user_list\");\nTemplate[\"available_user_list\"] = new Template(\"Template.available_user_list\", (function() {\n  var view = this;\n  return [ HTML.Raw('<h2 class=\"text-center\">Choose someone to chat with:</h2>\\n\t'), HTML.DIV({\n    \"class\": \"row\"\n  }, \"\\n\t\t\", HTML.DIV({\n    \"class\": \"col-md-6\"\n  }, \"\\n\t\t\", HTML.Raw('<h2 class=\"text-center\">Online</h2>'), \"\\n\t\t\", Blaze.Each(function() {\n    return Spacebars.call(view.lookup(\"users\"));\n  }, function() {\n    return [ \"\\n\t\t\t\", Blaze.If(function() {\n      return Spacebars.dataMustache(view.lookup(\"isMyUser\"), view.lookup(\"_id\"));\n    }, function() {\n      return \"\\n\t\t\t\";\n    }, function() {\n      return [ \"\\n\t\t\t\t\", Blaze.If(function() {\n        return Spacebars.dataMustache(view.lookup(\"online\"), view.lookup(\"_id\"));\n      }, function() {\n        return [ \"\\n\t\t\t\t\t\t\", Spacebars.include(view.lookupTemplate(\"online_user\")), \"\\n\t\t\t\t\" ];\n      }), \"\\n\t\t\t\" ];\n    }), \"\\n\t\t\" ];\n  }), \"\\n\t\t\"), \"\\n\t\t\", HTML.DIV({\n    \"class\": \"col-md-6\"\n  }, \"\\n\t\t\", HTML.Raw('<h2 class=\"text-center\">Offline</h2>'), \"\\n\t\t\", Blaze.Each(function() {\n    return Spacebars.call(view.lookup(\"users\"));\n  }, function() {\n    return [ \"\\n\t\t\t\", Blaze.If(function() {\n      return Spacebars.dataMustache(view.lookup(\"isMyUser\"), view.lookup(\"_id\"));\n    }, function() {\n      return \"\\n\t\t\t\";\n    }, function() {\n      return [ \"\\n\t\t\t\t\", Blaze.If(function() {\n        return Spacebars.dataMustache(view.lookup(\"online\"), view.lookup(\"_id\"));\n      }, function() {\n        return \"\\n\t\t\t\t\";\n      }, function() {\n        return [ \"\\n\t\t\t\t\t\t\", Spacebars.include(view.lookupTemplate(\"offline_user\")), \"\\n\t\t\t\t\" ];\n      }), \"\\n\t\t\t\" ];\n    }), \"\\n\t\t\" ];\n  }), \"\\n\t\t\"), \"\\n\\n\\n\t\t\t\", HTML.Raw(\"<!-- {{> available_user}} -->\"), \"\\n\t\") ];\n}));\n\nTemplate.__checkName(\"online_user\");\nTemplate[\"online_user\"] = new Template(\"Template.online_user\", (function() {\n  var view = this;\n  return HTML.DIV({\n    \"class\": \"row\"\n  }, HTML.Raw('\\n\t<div class=\"col-xs-4\"></div>\\n\t\t'), HTML.DIV({\n    \"class\": \"col-xs-4 display_username online\"\n  }, \"\\n\t\t\t\", HTML.A({\n    href: function() {\n      return [ \"/chat/\", Spacebars.mustache(view.lookup(\"_id\")) ];\n    }\n  }, \"\\n\t\t\t\t\", HTML.DIV({\n    \"class\": \"div_username\"\n  }, \"\\n\t\t\t\t\t\", HTML.DIV(\"\\n\t\t\t\t\t\", HTML.Raw('<div id=\"circle\" class=\"pull-left\"></div>'), HTML.P({\n    \"class\": \"inline username\"\n  }, Blaze.View(\"lookup:getUsername\", function() {\n    return Spacebars.mustache(view.lookup(\"getUsername\"), view.lookup(\"_id\"));\n  })), \"\\n\t\t\t\t\t\"), \"\\n\t\t\t\t\"), \"\\n\t\t\t\t\", HTML.DIV({\n    \"class\": \"display_pic\"\n  }, \"\\n\t\t\t\t\t\", HTML.DIV({\n    \"class\": \"background_avatar_img\"\n  }, \"\\n\t\t\t\t\t\t\", HTML.IMG({\n    src: function() {\n      return [ \"/\", Spacebars.mustache(Spacebars.dot(view.lookup(\"profile\"), \"avatar\")) ];\n    },\n    \"class\": \"avatar_img\"\n  }), \"\\n\t\t\t\t\t\"), \"\\n\t\t\t\t\"), \"\\n\t\t\t\"), \"\\n\t\t\"), HTML.Raw('\\n\t\t<div class=\"col-xs-4\"></div>\\n\t'));\n}));\n\nTemplate.__checkName(\"offline_user\");\nTemplate[\"offline_user\"] = new Template(\"Template.offline_user\", (function() {\n  var view = this;\n  return HTML.DIV({\n    \"class\": \"row\"\n  }, HTML.Raw('\\n\t\t<div class=\"col-xs-4\"></div>\\n\t\t'), HTML.DIV({\n    \"class\": \"col-xs-4 display_username offline\"\n  }, \"\\n\t\t\t\", HTML.A({\n    href: function() {\n      return [ \"/chat/\", Spacebars.mustache(view.lookup(\"_id\")) ];\n    }\n  }, \"\\n\t\t\t\", HTML.DIV({\n    \"class\": \"div_username\"\n  }, \"\\n\t\t\t\t\", HTML.DIV(\"\\n\t\t\t\t\", HTML.Raw('<div id=\"circle\" class=\"pull-left\"></div>'), HTML.P({\n    \"class\": \"username\"\n  }, Blaze.View(\"lookup:getUsername\", function() {\n    return Spacebars.mustache(view.lookup(\"getUsername\"), view.lookup(\"_id\"));\n  })), \"\\n\t\t\t\t\"), \"\\n\t\t\t\t\"), \"\\n\t\t\t\t\", HTML.DIV({\n    \"class\": \"display_pic\"\n  }, \"\\n\t\t\t\t\t\", HTML.DIV({\n    \"class\": \"background_avatar_img\"\n  }, \"\\n\t\t\t\t\t\t\", HTML.IMG({\n    src: function() {\n      return [ \"/\", Spacebars.mustache(Spacebars.dot(view.lookup(\"profile\"), \"avatar\")) ];\n    },\n    \"class\": \"avatar_img\"\n  }), \"\\n\t\t\t\t\t\"), \"\\n\t\t\t\t\"), \"\\n\t\t\t\"), \"\\n\t\t\"), HTML.Raw('\\n\t\t<div class=\"col-xs-4\"></div>\\n\t'));\n}));\n\nTemplate.__checkName(\"chat_page\");\nTemplate[\"chat_page\"] = new Template(\"Template.chat_page\", (function() {\n  var view = this;\n  return [ HTML.DIV({\n    \"class\": \"row\"\n  }, \"\\n\t\t\", HTML.DIV({\n    \"class\": \"col-md-12\"\n  }, \"\\n\t\t\t\", HTML.H2({\n    \"class\": \"text-center\"\n  }, \"Your talking to \", Blaze.View(\"lookup:other_user\", function() {\n    return Spacebars.mustache(view.lookup(\"other_user\"));\n  })), \"\\n\t\t\t\", HTML.DIV(\"\\n\t\t\t\", Blaze.Each(function() {\n    return Spacebars.call(view.lookup(\"messages\"));\n  }, function() {\n    return [ \"\\n\t\t\t\t\", Spacebars.include(view.lookupTemplate(\"chat_message\")), \"\\n\t\t\t\" ];\n  }), \"\\n\t\t\t\"), \"\t\\n\t\t\"), \"\\n\t\"), \"\\n    \", HTML.DIV({\n    \"class\": \"row\"\n  }, \"\\n\t\t\", HTML.DIV({\n    \"class\": \"col-md-12\"\n  }, \"\\n\t\t\", HTML.DIV({\n    \"class\": \"div-chat-input\"\n  }, \"\\n\t\t  \", HTML.Raw('<h3 class=\"text-center\">Type in the box below to send a message!</h3>'), \"\\n\t\t  \", HTML.FORM({\n    \"class\": \"js-send-chat\"\n  }, \"\\n\t\t\t\", HTML.Raw('<input class=\"input pull-left\" id=\"message_input\" type=\"text\" name=\"chat\" placeholder=\"type a message here...\">'), \"\\n\t\t\t\", HTML.Raw('<!-- <div contenteditable=\"true\" class=\"input pull-left\" id=\"message_input\">\\n \t\t\t</div>\\n -->'), \"\\n\t\t\t\", HTML.Raw(\"<!-- start emoticon dropdown menu -->\"), \"\\n\t\t    \", HTML.DIV({\n    \"class\": \"dropdown pull-left\",\n    id: \"menu-emoticon-container\"\n  }, \"\\n\t\t    \", HTML.DIV(\"\\n\t\t        \", HTML.A({\n    href: \"#\",\n    \"class\": \"dropdown-toggle\",\n    \"data-toggle\": \"dropdown\"\n  }, \" \\n\t\t        \t\", Blaze.View(\"lookup:getEmoji\", function() {\n    return Spacebars.mustache(view.lookup(\"getEmoji\"), \"smile\");\n  }), \"\\n\t\t        \", HTML.Raw('<b class=\"caret\"></b>')), \"\\n\t\t        \", HTML.UL({\n    \"class\": \"dropdown-menu js-insert-emoticon pull-right\"\n  }, \"\\n\t\t            \", HTML.LI(\"\\n\t\t                \", HTML.DIV({\n    \"class\": \"row dropdown-list\",\n    style: \"width: 150px;\"\n  }, \"\\n\t\t                    \", HTML.UL({\n    \"class\": \"list-unstyled col-xs-3\"\n  }, \"\\n\t\t                        \", HTML.LI(Blaze.View(\"lookup:getEmoji\", function() {\n    return Spacebars.mustache(view.lookup(\"getEmoji\"), \"smile\");\n  })), \"\\n\t\t                        \", HTML.LI(Blaze.View(\"lookup:getEmoji\", function() {\n    return Spacebars.mustache(view.lookup(\"getEmoji\"), \"blush\");\n  })), \"\\n\t\t                        \", HTML.LI(Blaze.View(\"lookup:getEmoji\", function() {\n    return Spacebars.mustache(view.lookup(\"getEmoji\"), \"relaxed\");\n  })), \"\\n\t\t                    \"), \"\\n\t\t                    \", HTML.UL({\n    \"class\": \"list-unstyled col-xs-3\"\n  }, \"\\n\t\t                        \", HTML.LI(Blaze.View(\"lookup:getEmoji\", function() {\n    return Spacebars.mustache(view.lookup(\"getEmoji\"), \"wink\");\n  })), \"\\n\t\t                        \", HTML.LI(Blaze.View(\"lookup:getEmoji\", function() {\n    return Spacebars.mustache(view.lookup(\"getEmoji\"), \"heart_eyes\");\n  })), \"\\n\t\t                        \", HTML.LI(Blaze.View(\"lookup:getEmoji\", function() {\n    return Spacebars.mustache(view.lookup(\"getEmoji\"), \"kissing_heart\");\n  })), \"\\n\t\t                    \"), \"\\n\t\t                    \", HTML.UL({\n    \"class\": \"list-unstyled col-xs-3\"\n  }, \"\\n\t\t                        \", HTML.LI(Blaze.View(\"lookup:getEmoji\", function() {\n    return Spacebars.mustache(view.lookup(\"getEmoji\"), \"kissing_closed_eyes\");\n  })), \"\\n\t\t                        \", HTML.LI(Blaze.View(\"lookup:getEmoji\", function() {\n    return Spacebars.mustache(view.lookup(\"getEmoji\"), \"stuck_out_tongue_winking_eye\");\n  })), \"\\n\t\t                        \", HTML.LI(Blaze.View(\"lookup:getEmoji\", function() {\n    return Spacebars.mustache(view.lookup(\"getEmoji\"), \"stuck_out_tongue_closed_eyes\");\n  })), \"\\n\t\t                    \"), \"\\n\t\t                    \", HTML.UL({\n    \"class\": \"list-unstyled col-xs-3\"\n  }, \"\\n\t\t                        \", HTML.LI(Blaze.View(\"lookup:getEmoji\", function() {\n    return Spacebars.mustache(view.lookup(\"getEmoji\"), \"grin\");\n  })), \"\\n\t\t                        \", HTML.LI(Blaze.View(\"lookup:getEmoji\", function() {\n    return Spacebars.mustache(view.lookup(\"getEmoji\"), \"pensive\");\n  })), \"\\n\t\t                        \", HTML.LI(Blaze.View(\"lookup:getEmoji\", function() {\n    return Spacebars.mustache(view.lookup(\"getEmoji\"), \"disappointed\");\n  })), \"\\n\t\t                    \"), \"\\n\t\t                \"), \"\\n\t\t            \"), \"\\n\t\t        \"), \"\\n\t\t        \"), \"\\n\t\t    \"), \"\\n\t\t\t\", HTML.Raw(\"<!-- end emoticon dropdown menu -->\"), \"\\n\\n\t\t\t\", HTML.Raw('<button class=\"btn btn-primary\" id=\"btn-chat-send\">send</button>'), \"\\n\t\t  \"), \"\\n\t\t\"), \"\\n\t\t\"), \"\\n\t\") ];\n}));\n\nTemplate.__checkName(\"chat_message\");\nTemplate[\"chat_message\"] = new Template(\"Template.chat_message\", (function() {\n  var view = this;\n  return HTML.DIV({\n    \"class\": \"row\"\n  }, \"\\n\t\", HTML.DIV({\n    \"class\": function() {\n      return [ \"well well-lg \", Spacebars.mustache(view.lookup(\"message_sender\")) ];\n    },\n    id: \"message\"\n  }, \"\\n\t  \", HTML.IMG({\n    src: function() {\n      return [ \"/\", Spacebars.mustache(view.lookup(\"display_pic\")) ];\n    },\n    height: \"20px\",\n    width: \"20px\"\n  }), \"  said: \\n\t  \", Spacebars.include(view.lookupTemplate(\"emoji\"), function() {\n    return [ \"\\n\t  \t\", Blaze.View(\"lookup:text\", function() {\n      return Spacebars.mustache(view.lookup(\"text\"));\n    }), \"\\n\t  \" ];\n  }), \"\\n\t  \", HTML.Raw(\"<br>\"), \"\\n\t\"), \"\\n  \");\n}));\n","Meteor.subscribe(\"chats\", function() {\n  \tSession.set('db_data_loaded', true);\n  });\nMeteor.subscribe(\"users\");\n\nMeteor.startup(function () {\n\tSession.set('db_data_loaded', false);\n  Meteor.subscribe('emojis');\n});\n// set up the main template the the router will use to build pages\nRouter.configure({\n  layoutTemplate: 'ApplicationLayout'\n});\n// specify the top level route, the page users see when they arrive at the site\nRouter.route('/', function () {\n  console.log(\"rendering root /\");\n  this.render(\"navbar\", {to:\"header\"});\n  this.render(\"lobby_page\", {to:\"main\"});  \n});\n\n// specify a route that allows the current user to chat to another users\nRouter.route('/chat/:_id', function () {\n  // the user they want to chat to has id equal to \n  // the id sent in after /chat/... \n  if (!Meteor.user()) {\n    alert('Please log in to chat');\n  } else {\n    var otherUserId = this.params._id;\n    // find a chat that has two users that match current user id\n    // and the requested user id\n    var filter = {$or:[\n                {user1Id:Meteor.userId(), user2Id:otherUserId}, \n                {user2Id:Meteor.userId(), user1Id:otherUserId}\n                ]};\n    var chat = Chats.findOne(filter);\n    if (Session.get('db_data_loaded')) {\n      if (!chat){// no chat matching the filter - need to insert a new one\n        chatId = Meteor.call('insertChat', otherUserId);\n        console.log(\"no chat matching the filter - need to insert a new one\");\n      }\n      else {// there is a chat going already - use that. \n        console.log(\"there is a chat going already - use that.\");\n        chatId = chat._id;\n      }\n      if (chatId){// looking good, save the id to the session\n        Session.set(\"chatId\",chatId);\n      }\n    }\n      this.render(\"navbar\", {to:\"header\"});\n      this.render(\"chat_page\", {to:\"main\"}); \n    }\n });\n\n///\n// helper functions \n/// \nTemplate.available_user_list.helpers({\n  users:function(){\n    return Meteor.users.find();\n  },\n  isMyUser:function(userId){\n    if (userId == Meteor.userId()){\n      return true;\n    }\n    else {\n      return false;\n    }\n  },\n  online:function(userId) {\n  \tif(Meteor.users.findOne({_id:userId}).services.resume &&\n  \t\tMeteor.users.findOne({_id:userId}).services.resume.loginTokens.length > 0) {\n  \t\treturn true;\n  \t} else {\n  \t\treturn false\n  \t}\n  }\n\n})\nTemplate.online_user.helpers({\n\tgetUsername:function(userId){\n    user = Meteor.users.findOne({_id:userId});\n    return user.profile.username;\n  }, \n})\nTemplate.offline_user.helpers({\n\tgetUsername:function(userId){\n    user = Meteor.users.findOne({_id:userId});\n    return user.profile.username;\n  }, \n})\n// Template.available_user.helpers({\n//    getUsername:function(userId){\n//      user = Meteor.users.findOne({_id:userId});\n//      return user.profile.username;\n//    }, \n//    isMyUser:function(userId){\n//      if (userId == Meteor.userId()){\n//        return true;\n//      }\n//      else {\n//        return false;\n//      }\n//    },\n//    online:function(userId) {\n//    \tif(Meteor.users.findOne({_id:userId}).services.resume &&\n//    \t\tMeteor.users.findOne({_id:userId}).services.resume.loginTokens.length > 0) {\n//    \t\treturn true;\n//    \t} else {\n//    \t\treturn false\n//    \t}\n//    }\n//  })\nTemplate.chat_page.helpers({\n  messages:function(){\n    var chat = Chats.findOne({_id:Session.get(\"chatId\")});\n    return chat.messages;\n  }, \n  other_user:function(){\n  \tvar chat = Chats.findOne({_id:Session.get(\"chatId\")})\n    console.log(chat.user1Id);\n  \tif (Meteor.userId() == chat.user1Id) {\n  \t\tvar username = Meteor.users.findOne({_id:chat.user2Id}).profile.username;\n  \t\treturn username;\n  \t} else {\n  \t\tvar username = Meteor.users.findOne({_id:chat.user1Id}).profile.username;\n  \t\treturn username;\n  \t}\n  }, \n  getEmoji:function(emoji) {\n    return Emojis.findOne({alias: emoji}).emoji;\n  }\n})\nTemplate.chat_message.helpers({\n\tdisplay_pic: function() {\n\t\treturn this.sender.profile.avatar;\n\t},\n\tmessage_sender:function() {\n\t\tif (this.sender._id == Meteor.user()._id) {\n\t\t\treturn \"floatMeRight\";\n\t\t} else {\n\t\t\treturn;\n\t\t};\n\t}\n})\n\n///\n// event helpers\n///\n\nTemplate.chat_page.events({\n// this event fires when the user sends a message on the chat page\n'submit .js-send-chat':function(event){\n  // stop the form from triggering a page reload\n  event.preventDefault();\n  // see if we can find a chat object in the database\n  // to which we'll add the message\n  var chat = Chats.findOne({_id:Session.get(\"chatId\")});\n  if (chat){// ok - we have a chat to use\n    var msgs = chat.messages; // pull the messages property\n    if (!msgs){// no messages yet, create a new array\n      msgs = [];\n    }\n    // is a good idea to insert data straight from the form\n    // (i.e. the user) into the database?? certainly not. \n    // push adds the message to the end of the array\n    msgs.push({\n    \tsender: Meteor.user(),\n    \ttext: event.target.chat.value,\n\t });\n    // reset the form\n    // document.querySelector('[contenteditable]').textContent = \"\";\n    event.target.chat.value = \"\";\n    // put the messages array onto the chat object\n    chat.messages = msgs;\n    // update the chat object in the database.\n    // Chats.update(chat._id, chat);\n    Meteor.call('updateChat', chat)     \n  }\n},\n'click .js-insert-emoticon':function(event) {\n  $('#message_input').val($('#message_input').val() + event.target.textContent);\n\n}\n})\n\n///\n// onRendered\n///\n\nTemplate.online_user.onRendered(function () {\n$( \".display_username\" ).hover(\n  function() {\n    $(this.firstChild.nextElementSibling.children[1]).css(\"display\", \"unset\");\n    $(this.firstChild.nextElementSibling.children[0]).css(\"border-bottom-left-radius\", \"0px\");\n    $(this.firstChild.nextElementSibling.children[0]).css(\"border-bottom-right-radius\", \"0px\");\n  }, function() {\n    $(this.firstChild.nextElementSibling.children[1]).css(\"display\", \"none\");\n    $(this.firstChild.nextElementSibling.children[0]).css(\"border-bottom-left-radius\", \"4px\");\n    $(this.firstChild.nextElementSibling.children[0]).css(\"border-bottom-right-radius\", \"4px\");\n  }\n);\n});\nTemplate.offline_user.onRendered(function () {\n$( \".display_username\" ).hover(\n  function() {\n    $(this.firstChild.nextElementSibling.children[1]).css(\"display\", \"unset\");\n    $(this.firstChild.nextElementSibling.children[0]).css(\"border-bottom-left-radius\", \"0px\");\n    $(this.firstChild.nextElementSibling.children[0]).css(\"border-bottom-right-radius\", \"0px\");\n  }, function() {\n    $(this.firstChild.nextElementSibling.children[1]).css(\"display\", \"none\");\n    $(this.firstChild.nextElementSibling.children[0]).css(\"border-bottom-left-radius\", \"4px\");\n    $(this.firstChild.nextElementSibling.children[0]).css(\"border-bottom-right-radius\", \"4px\");\n  }\n);\n});\n\nAccounts.ui.config({\n  requestPermissions: {},\n  extraSignupFields: [{\n      fieldName: 'username',\n      fieldLabel: 'Username',\n      inputType: 'text',\n      visible: true,\n      validate: function(value, errorFunction) {\n        if (!value) {\n          errorFunction(\"Please enter a username\");\n          return false;\n        } else if(value.length >= 9) {\n          errorFunction(\"Please enter a username of 8 characters or less\");\n        } else {\n          return true;\n        }\n      }\n  }, {\n      fieldName: 'gender',\n      showFieldLabel: false,      // If true, fieldLabel will be shown before radio group\n      fieldLabel: 'Gender',\n      inputType: 'radio',\n      radioLayout: 'vertical',    // It can be 'inline' or 'vertical'\n      data: [{                    // Array of radio options, all properties are required\n          id: 1,                  // id suffix of the radio element\n          label: 'Male',          // label for the radio element\n          value: 'm'              // value of the radio element, this will be saved.\n        }, {\n          id: 2,\n          label: 'Female',\n          value: 'f',\n          checked: 'checked'\n      }],\n      visible: true\n  }, {\n      fieldName: 'avatar',\n      showFieldLabel: false,      // If true, fieldLabel will be shown before radio group\n      fieldLabel: 'Avatar',\n      inputType: 'text',\n      visible: false\n  }, {\n      fieldName: 'terms',\n      fieldLabel: 'I accept the terms and conditions',\n      inputType: 'checkbox',\n      visible: true,\n      saveToProfile: false,\n      validate: function(value, errorFunction) {\n          if (value) {\n              return true;\n          } else {\n              errorFunction('You must accept the terms and conditions.');\n              return false;\n          }\n      }\n  }]\n});\n\n\n\n\n\n\n\n","Chats = new Mongo.Collection(\"chats\");","///\n// Shared Folder\n///\n\nMeteor.methods({\n\tinsertChat:function(otherUserId) {\n\t\tchatId = Chats.insert({user1Id:Meteor.userId(), user2Id:otherUserId});\n\t\treturn chatId;\n\t}, \n\tupdateChat:function(chat) {\n\t\tChats.update(chat._id, chat);\n\t}\n});\n\n"]}