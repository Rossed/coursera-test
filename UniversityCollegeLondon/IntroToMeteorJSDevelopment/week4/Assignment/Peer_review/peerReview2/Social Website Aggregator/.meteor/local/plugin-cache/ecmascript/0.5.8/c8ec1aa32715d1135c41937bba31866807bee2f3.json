{"metadata":{"usedHelpers":[],"marked":[],"modules":{"imports":[],"exports":{"exported":[],"specifiers":[]}}},"options":{"filename":"/client/main.js","filenameRelative":"/client/main.js","env":{},"retainLines":false,"highlightCode":true,"suppressDeprecationMessages":false,"presets":[],"plugins":[[[],{"polyfill":false}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],{"loose":true}],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null]],"ignore":[],"code":true,"metadata":true,"ast":false,"comments":true,"compact":false,"minified":false,"sourceMap":true,"sourceMaps":true,"sourceMapTarget":"/client/main.js.map","sourceFileName":"/client/main.js","babelrc":false,"sourceType":"module","moduleIds":false,"passPerPreset":false,"basename":"main"},"ignored":false,"code":"/// routing\nRouter.configure({\n    layoutTemplate: 'ApplicationLayout'\n});\n\nRouter.route('/', function () {\n    this.render('navbar', { to: 'navbar' });\n    this.render('website_form', { to: 'website_form' });\n    this.render('website_list', { to: 'main', data: { websites: Websites.find({}, { sort: { rating: -1 } }) } });\n});\n\nRouter.route('/site/:_id', function () {\n    this.render('navbar', { to: 'navbar' });\n    this.render('website_detail', { to: 'main', data: Websites.findOne({ _id: this.params._id }) });\n    this.render('website_comments', { to: 'comments', data: { comments: Comments.find({ website_id: this.params._id }) } });\n});\n\nRouter.route('/search/:_query', function () {\n    var query = this.params._query.toLowerCase();\n    var search_result = [];\n    var websites = Websites.find().fetch();\n    for (var i in meteorBabelHelpers.sanitizeForInObject(websites)) {\n        if (websites[i].title.toLowerCase().search(query) >= 0 || websites[i].description.toLowerCase().search(query) >= 0) {\n            search_result.push(websites[i]);\n        }\n    }\n    console.log(search_result);\n    this.render('navbar', { to: 'navbar' });\n    this.render('website_list', { to: 'main', data: { websites: search_result } });\n});\n// template helper function\nTemplate.registerHelper('formatDate', function (date) {\n    return date.toLocaleDateString();\n});\n\n/// acounts config\nAccounts.ui.config({\n    passwordSignupFields: \"USERNAME_AND_EMAIL\"\n});\n\n/////\n// template helpers\n/////\n\n// helper function that returns all available websites\n//Template.website_list.helpers({\n//  websites:function(){\n//      return Websites.find({}, {sort: {rating: -1}});\n//  }\n//});\n\n/////\n// template events\n/////\n\nTemplate.website_list.events({\n    \"click .js-upvote\": function () {\n        function clickJsUpvote(event) {\n            // example of how you can access the id for the website in the database\n            // (this is the data context for the template)\n            var website_id = this._id;\n            console.log(\"Up voting website with id \" + website_id);\n            // put the code in here to add a vote to a website!\n            old_rating = Websites.findOne({ _id: website_id }).rating;\n            if (old_rating == undefined) {\n                old_rating = 0;\n            }\n            console.log(\"Site value is \" + old_rating);\n            if (Meteor.user()) {\n                Websites.update({ _id: website_id }, { $set: { rating: old_rating + 1 } });\n            } else {\n                $('#modal-dialog').modal('show');\n            }\n\n            return false; // prevent the button from reloading the page\n        }\n\n        return clickJsUpvote;\n    }(),\n    \"click .js-downvote\": function () {\n        function clickJsDownvote(event) {\n\n            // example of how you can access the id for the website in the database\n            // (this is the data context for the template)\n            var website_id = this._id;\n            console.log(\"Down voting website with id \" + website_id);\n\n            // put the code in here to remove a vote from a website!\n            old_rating = Websites.findOne({ _id: website_id }).rating;\n            if (old_rating == undefined) {\n                old_rating = 0;\n            }\n            console.log(\"Site value is \" + old_rating);\n            if (Meteor.user()) {\n                Websites.update({ _id: website_id }, { $set: { rating: old_rating - 1 } });\n            } else {\n                $('#modal-dialog').modal('show');\n            }\n\n            return false; // prevent the button from reloading the page\n        }\n\n        return clickJsDownvote;\n    }()\n});\n\nTemplate.website_form.events({\n    \"click .js-toggle-website-form\": function () {\n        function clickJsToggleWebsiteForm(event) {\n            $(\"#website_form\").toggle('slow');\n        }\n\n        return clickJsToggleWebsiteForm;\n    }(),\n    \"submit .js-save-website-form\": function () {\n        function submitJsSaveWebsiteForm(event) {\n\n            // here is an example of how to get the url out of the form:\n            var url = event.target.url.value;\n            console.log(\"The url they entered is: \" + url);\n\n            //  put your website saving code in here!\n            if (Meteor.user()) {\n                Websites.insert({\n                    url: event.target.url.value,\n                    title: event.target.title.value,\n                    description: event.target.description.value,\n                    createdBy: Meteor.user().username,\n                    createdOn: new Date()\n                });\n            } else {\n                $('#modal-dialog').modal('show');\n            }\n\n            $(\"#website_form\").toggle('slow');\n\n            return false; // stop the form submit from reloading the page\n        }\n\n        return submitJsSaveWebsiteForm;\n    }()\n});\n\nTemplate.website_detail.events({\n    \"submit .js-save-comment-form\": function () {\n        function submitJsSaveCommentForm(event) {\n            var website_id = this._id;\n            if (Meteor.user()) {\n                console.log(this._id);\n                Comments.insert({\n                    website_id: website_id,\n                    comment: event.target.comment.value,\n                    createdBy: Meteor.user().username,\n                    createdOn: new Date()\n                });\n            } else {\n                $('#modal-dialog').modal('show');\n            }\n\n            return false;\n        }\n\n        return submitJsSaveCommentForm;\n    }()\n\n});\n\nTemplate.navbar.events({\n    \"submit .js-search-form\": function () {\n        function submitJsSearchForm(event) {\n            console.log('/search/' + event.target.search.value);\n            Router.go('/search/' + event.target.search.value);\n            return false;\n        }\n\n        return submitJsSearchForm;\n    }()\n});","ast":null,"map":{"version":3,"sources":["/client/main.js"],"names":[],"mappings":"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","file":"/client/main.js.map","sourcesContent":["/// routing\nRouter.configure({\n    layoutTemplate: 'ApplicationLayout'\n});\n\nRouter.route('/', function(){\n    this.render('navbar', {to: 'navbar'});\n    this.render('website_form', {to: 'website_form'});\n    this.render('website_list', {to: 'main', data: {websites: Websites.find({}, {sort: {rating: -1}})}});\n});\n\nRouter.route('/site/:_id', function() {\n    this.render('navbar', {to: 'navbar'});\n    this.render('website_detail', {to: 'main', data: Websites.findOne({_id:this.params._id})});\n    this.render('website_comments', {to: 'comments', data: {comments: Comments.find({website_id: this.params._id})}});\n});\n\nRouter.route('/search/:_query', function() {\n    var query = this.params._query.toLowerCase();\n    var search_result = [];\n    var websites = Websites.find().fetch()\n    for (var i in websites) {\n        if(websites[i].title.toLowerCase().search(query)>=0 || websites[i].description.toLowerCase().search(query)>=0) {\n            search_result.push(websites[i]);\n        }\n    }\n    console.log(search_result);\n    this.render('navbar', {to: 'navbar'});\n    this.render('website_list', {to: 'main', data: {websites: search_result}});\n});\n// template helper function\nTemplate.registerHelper('formatDate', function(date) {\n    return date.toLocaleDateString();\n});\n\n/// acounts config\nAccounts.ui.config({\n    passwordSignupFields: \"USERNAME_AND_EMAIL\"\n});\n\n/////\n// template helpers\n/////\n\n// helper function that returns all available websites\n//Template.website_list.helpers({\n//  websites:function(){\n//      return Websites.find({}, {sort: {rating: -1}});\n//  }\n//});\n\n\n/////\n// template events\n/////\n\nTemplate.website_list.events({\n    \"click .js-upvote\":function(event) {\n        // example of how you can access the id for the website in the database\n        // (this is the data context for the template)\n        var website_id = this._id;\n        console.log(\"Up voting website with id \"+website_id);\n        // put the code in here to add a vote to a website!\n        old_rating = Websites.findOne({_id: website_id}).rating;\n        if(old_rating == undefined) {\n            old_rating = 0;\n        }\n        console.log(\"Site value is \" + old_rating);\n        if(Meteor.user()) {\n            Websites.update({_id: website_id}, {$set: {rating: old_rating + 1}});\n        }\n        else {\n            $('#modal-dialog').modal('show');\n        }\n\n        return false;// prevent the button from reloading the page\n    },\n    \"click .js-downvote\":function(event) {\n\n        // example of how you can access the id for the website in the database\n        // (this is the data context for the template)\n        var website_id = this._id;\n        console.log(\"Down voting website with id \"+website_id);\n\n        // put the code in here to remove a vote from a website!\n        old_rating = Websites.findOne({_id: website_id}).rating;\n        if(old_rating == undefined) {\n            old_rating = 0;\n        }\n        console.log(\"Site value is \" + old_rating);\n        if(Meteor.user()) {\n            Websites.update({_id: website_id}, {$set: {rating: old_rating - 1}});\n        }\n        else {\n            $('#modal-dialog').modal('show');\n        }\n\n        return false;// prevent the button from reloading the page\n    }\n})\n\nTemplate.website_form.events({\n    \"click .js-toggle-website-form\":function(event){\n        $(\"#website_form\").toggle('slow');\n    },\n    \"submit .js-save-website-form\":function(event){\n\n        // here is an example of how to get the url out of the form:\n        var url = event.target.url.value;\n        console.log(\"The url they entered is: \"+url);\n\n        //  put your website saving code in here!\n        if(Meteor.user()) {\n            Websites.insert({\n                url: event.target.url.value,\n                title: event.target.title.value,\n                description: event.target.description.value,\n                createdBy: Meteor.user().username,\n                createdOn: new Date()\n            });\n        }\n        else {\n            $('#modal-dialog').modal('show');\n        }\n\n        $(\"#website_form\").toggle('slow');\n\n        return false;// stop the form submit from reloading the page\n\n    }\n});\n\nTemplate.website_detail.events({\n    \"submit .js-save-comment-form\": function(event) {\n        var website_id = this._id;\n        if(Meteor.user()) {\n            console.log(this._id);\n            Comments.insert({\n                website_id: website_id,\n                comment: event.target.comment.value,\n                createdBy: Meteor.user().username,\n                createdOn: new Date()\n            });\n        }\n        else {\n            $('#modal-dialog').modal('show');\n        }\n        \n        return false;\n    },\n\n});\n\nTemplate.navbar.events({\n    \"submit .js-search-form\": function(event) {\n        console.log('/search/' + event.target.search.value);\n        Router.go('/search/' + event.target.search.value);\n        return false;\n    },\n});\n\n\n\n\n"]},"hash":"c8ec1aa32715d1135c41937bba31866807bee2f3"}
