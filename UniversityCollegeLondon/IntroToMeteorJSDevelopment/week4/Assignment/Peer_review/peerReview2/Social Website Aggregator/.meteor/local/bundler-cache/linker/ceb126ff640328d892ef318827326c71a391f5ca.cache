[{"type":"js","data":"/* Imports for global scope */\n\nMongo = Package.mongo.Mongo;\nReactiveVar = Package['reactive-var'].ReactiveVar;\n$ = Package.jquery.$;\njQuery = Package.jquery.jQuery;\nTracker = Package.tracker.Tracker;\nDeps = Package.tracker.Deps;\nRouter = Package['iron:router'].Router;\nRouteController = Package['iron:router'].RouteController;\nHTTP = Package.http.HTTP;\nmoment = Package['momentjs:moment'].moment;\nMeteor = Package.meteor.Meteor;\nglobal = Package.meteor.global;\nmeteorEnv = Package.meteor.meteorEnv;\nWebApp = Package.webapp.WebApp;\n_ = Package.underscore._;\nDDP = Package['ddp-client'].DDP;\nLaunchScreen = Package['launch-screen'].LaunchScreen;\nBlaze = Package.ui.Blaze;\nUI = Package.ui.UI;\nHandlebars = Package.ui.Handlebars;\nSpacebars = Package.spacebars.Spacebars;\nTemplate = Package.templating.Template;\nmeteorInstall = Package.modules.meteorInstall;\nBuffer = Package.modules.Buffer;\nprocess = Package.modules.process;\nSymbol = Package['ecmascript-runtime'].Symbol;\nMap = Package['ecmascript-runtime'].Map;\nSet = Package['ecmascript-runtime'].Set;\nmeteorBabelHelpers = Package['babel-runtime'].meteorBabelHelpers;\nPromise = Package.promise.Promise;\nIron = Package['iron:core'].Iron;\nAccounts = Package['accounts-base'].Accounts;\nAutoupdate = Package.autoupdate.Autoupdate;\nReload = Package.reload.Reload;\nHTML = Package.htmljs.HTML;\n\n","servePath":"/packages/global-imports.js"},{"type":"js","data":"var require = meteorInstall({\"client\":{\"template.main.js\":function(){\n\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                //\n// client/template.main.js                                                                                        //\n//                                                                                                                //\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                  //\n                                                                                                                  // 1\nTemplate.body.addContent((function() {                                                                            // 2\n  var view = this;                                                                                                // 3\n  return \"\";                                                                                                      // 4\n}));                                                                                                              // 5\nMeteor.startup(Template.body.renderToDocument);                                                                   // 6\n                                                                                                                  // 7\nTemplate.__checkName(\"AppLayout\");                                                                                // 8\nTemplate[\"AppLayout\"] = new Template(\"Template.AppLayout\", (function() {                                          // 9\n  var view = this;                                                                                                // 10\n  return [ Blaze._TemplateWith(function() {                                                                       // 11\n    return \"navbar\";                                                                                              // 12\n  }, function() {                                                                                                 // 13\n    return Spacebars.include(view.lookupTemplate(\"yield\"));                                                       // 14\n  }), \"\\n    \", Blaze._TemplateWith(function() {                                                                  // 15\n    return \"main\";                                                                                                // 16\n  }, function() {                                                                                                 // 17\n    return Spacebars.include(view.lookupTemplate(\"yield\"));                                                       // 18\n  }), \"\\n    \", Blaze._TemplateWith(function() {                                                                  // 19\n    return \"form\";                                                                                                // 20\n  }, function() {                                                                                                 // 21\n    return Spacebars.include(view.lookupTemplate(\"yield\"));                                                       // 22\n  }), \"\\n    \", Blaze._TemplateWith(function() {                                                                  // 23\n    return \"list\";                                                                                                // 24\n  }, function() {                                                                                                 // 25\n    return Spacebars.include(view.lookupTemplate(\"yield\"));                                                       // 26\n  }) ];                                                                                                           // 27\n}));                                                                                                              // 28\n                                                                                                                  // 29\nTemplate.__checkName(\"welcome\");                                                                                  // 30\nTemplate[\"welcome\"] = new Template(\"Template.welcome\", (function() {                                              // 31\n  var view = this;                                                                                                // 32\n  return HTML.DIV({                                                                                               // 33\n    \"class\": \"container\"                                                                                          // 34\n  }, \"\\n    \", HTML.H1(Blaze.View(\"lookup:username\", function() {                                                 // 35\n    return Spacebars.mustache(view.lookup(\"username\"));                                                           // 36\n  }), \", welcome to siteace\"), HTML.Raw(\"\\n    <br>\\n  \"));                                                       // 37\n}));                                                                                                              // 38\n                                                                                                                  // 39\nTemplate.__checkName(\"navbar\");                                                                                   // 40\nTemplate[\"navbar\"] = new Template(\"Template.navbar\", (function() {                                                // 41\n  var view = this;                                                                                                // 42\n  return [ HTML.Raw(\"<!-- navbar  - you will be putting the login functions here -->\\n  \"), HTML.NAV({            // 43\n    \"class\": \"navbar navbar-default\"                                                                              // 44\n  }, \"\\n    \", HTML.DIV({                                                                                         // 45\n    \"class\": \"container\"                                                                                          // 46\n  }, \"\\n      \", HTML.DIV({                                                                                       // 47\n    \"class\": \"navbar-header\"                                                                                      // 48\n  }, \"\\n        \", HTML.A({                                                                                       // 49\n    \"class\": \"navbar-brand\",                                                                                      // 50\n    href: \"#\"                                                                                                     // 51\n  }, \"\\n          Site Ace \", HTML.Raw(\"&nbsp;\"), \"\\n          \", Spacebars.include(view.lookupTemplate(\"loginButtons\")), \"\\n        \"), \"\\n      \"), \"\\n    \"), \"\\n  \") ];\n}));                                                                                                              // 53\n                                                                                                                  // 54\nTemplate.__checkName(\"website_form\");                                                                             // 55\nTemplate[\"website_form\"] = new Template(\"Template.website_form\", (function() {                                    // 56\n  var view = this;                                                                                                // 57\n  return Blaze.If(function() {                                                                                    // 58\n    return Spacebars.call(view.lookup(\"currentUser\"));                                                            // 59\n  }, function() {                                                                                                 // 60\n    return [ \"\\n  \", HTML.DIV({                                                                                   // 61\n      \"class\": \"container\"                                                                                        // 62\n    }, \"\\n    \", HTML.A({                                                                                         // 63\n      \"class\": \"btn btn-default js-toggle-website-form\",                                                          // 64\n      href: \"#\"                                                                                                   // 65\n    }, \"\\n        \", HTML.SPAN({                                                                                  // 66\n      \"class\": \"glyphicon glyphicon-plus\",                                                                        // 67\n      \"aria-hidden\": \"true\"                                                                                       // 68\n    }), \"\\n    \"), \"\\n    \", HTML.DIV({                                                                           // 69\n      id: \"website_form\",                                                                                         // 70\n      \"class\": \"hidden_div\"                                                                                       // 71\n    }, \"\\n      \", HTML.FORM({                                                                                    // 72\n      \"class\": \"js-save-website-form\"                                                                             // 73\n    }, \"\\n        \", HTML.DIV({                                                                                   // 74\n      \"class\": \"form-group\"                                                                                       // 75\n    }, \"\\n          \", HTML.LABEL({                                                                               // 76\n      \"for\": \"url\"                                                                                                // 77\n    }, \"Site address\"), \"\\n          \", HTML.INPUT({                                                              // 78\n      type: \"text\",                                                                                               // 79\n      \"class\": \"form-control\",                                                                                    // 80\n      id: \"url\",                                                                                                  // 81\n      placeholder: \"http://www.mysite.com\"                                                                        // 82\n    }), \"\\n        \"), \"\\n        \", HTML.DIV({                                                                   // 83\n      \"class\": \"form-group\"                                                                                       // 84\n    }, \"\\n          \", HTML.LABEL({                                                                               // 85\n      \"for\": \"title\"                                                                                              // 86\n    }, \"Title\"), \"\\n          \", HTML.INPUT({                                                                     // 87\n      type: \"text\",                                                                                               // 88\n      \"class\": \"form-control\",                                                                                    // 89\n      id: \"title\",                                                                                                // 90\n      placeholder: \"Mysite\"                                                                                       // 91\n    }), \"\\n        \"), \"\\n          \", HTML.DIV({                                                                 // 92\n      \"class\": \"form-group\"                                                                                       // 93\n    }, \"\\n          \", HTML.LABEL({                                                                               // 94\n      \"for\": \"description\"                                                                                        // 95\n    }, \"Description\"), \"\\n          \", HTML.INPUT({                                                               // 96\n      type: \"text\",                                                                                               // 97\n      \"class\": \"form-control\",                                                                                    // 98\n      id: \"description\",                                                                                          // 99\n      placeholder: \"I found this site really useful for ...\"                                                      // 100\n    }), \"\\n        \"), \"\\n\\n        \", HTML.BUTTON({                                                              // 101\n      type: \"submit\",                                                                                             // 102\n      \"class\": \"btn btn-default js-toggle-website-form-submit\"                                                    // 103\n    }, \"Submit\"), \"\\n      \"), \"\\n    \"), \"\\n  \"), \"\\n  \", HTML.BR(), \"\\n  \" ];                                   // 104\n  });                                                                                                             // 105\n}));                                                                                                              // 106\n                                                                                                                  // 107\nTemplate.__checkName(\"website_list\");                                                                             // 108\nTemplate[\"website_list\"] = new Template(\"Template.website_list\", (function() {                                    // 109\n  var view = this;                                                                                                // 110\n  return HTML.OL(\"\\n  \", Blaze.Each(function() {                                                                  // 111\n    return Spacebars.call(view.lookup(\"websites\"));                                                               // 112\n  }, function() {                                                                                                 // 113\n    return [ \"\\n   \", Spacebars.include(view.lookupTemplate(\"website_item\")), \"\\n  \" ];                           // 114\n  }), \"\\n  \");                                                                                                    // 115\n}));                                                                                                              // 116\n                                                                                                                  // 117\nTemplate.__checkName(\"website_item\");                                                                             // 118\nTemplate[\"website_item\"] = new Template(\"Template.website_item\", (function() {                                    // 119\n  var view = this;                                                                                                // 120\n  return HTML.DIV({                                                                                               // 121\n    \"class\": \"container\"                                                                                          // 122\n  }, \"\\n    \", HTML.DIV({                                                                                         // 123\n    \"class\": \"well\"                                                                                               // 124\n  }, \"\\n      \", HTML.LI(\"\\n        \", HTML.A({                                                                   // 125\n    href: function() {                                                                                            // 126\n      return Spacebars.mustache(view.lookup(\"url\"));                                                              // 127\n    },                                                                                                            // 128\n    id: \"title\"                                                                                                   // 129\n  }, HTML.H3(Blaze.View(\"lookup:title\", function() {                                                              // 130\n    return Spacebars.mustache(view.lookup(\"title\"));                                                              // 131\n  }))), \"\\n        \", HTML.Raw(\"<br>\"), \"\\n        \", HTML.P({                                                    // 132\n    \"class\": \"details\",                                                                                           // 133\n    style: \"font-style: italic\"                                                                                   // 134\n  }, \"\\n          \", Blaze.View(\"lookup:description\", function() {                                                // 135\n    return Spacebars.mustache(view.lookup(\"description\"));                                                        // 136\n  }), \"\\n        \"), HTML.Raw(\"&nbsp;\"), HTML.Raw(\"&nbsp;\"), \"\\n          \", Blaze.If(function() {                // 137\n    return Spacebars.call(view.lookup(\"currentUser\"));                                                            // 138\n  }, function() {                                                                                                 // 139\n    return [ \"\\n            \", HTML.A({                                                                           // 140\n      href: function() {                                                                                          // 141\n        return [ \"/website_item/\", Spacebars.mustache(view.lookup(\"_id\")) ];                                      // 142\n      },                                                                                                          // 143\n      \"class\": \"btn btn-info js-details-button details\"                                                           // 144\n    }, \"details\"), \"\\n          \" ];                                                                              // 145\n  }), \"\\n        \", HTML.Raw(\"<br>\"), HTML.Raw(\"<br>\"), \"\\n        \", HTML.P(\"\\n          \", HTML.SPAN({          // 146\n    \"class\": \"added-on\"                                                                                           // 147\n  }, \"Added: \", Blaze.View(\"lookup:createdOn\", function() {                                                       // 148\n    return Spacebars.mustache(view.lookup(\"createdOn\"));                                                          // 149\n  })), \"\\n        \"), \"\\n\\n        \", HTML.Raw('<a href=\"#\" class=\"btn btn-success js-upvote\">\\n          <span class=\"glyphicon glyphicon-arrow-up\" aria-hidden=\"true\"></span>\\n        </a>'), \"\\n\\n        \", HTML.Raw('<a href=\"#\" class=\"btn btn-danger js-downvote\">\\n          <span class=\"glyphicon glyphicon-arrow-down\" aria-hidden=\"true\"></span>\\n        </a>'), \"\\n        \", HTML.Raw(\"<!-- you will be putting your up and down vote buttons in here! -->\"), \"\\n        \", HTML.Raw(\"&nbsp;\"), \"\\n        \", HTML.P({\n    style: \"display:inline-block\"                                                                                 // 151\n  }, \"Up: \", Blaze.View(\"lookup:ratingUp\", function() {                                                           // 152\n    return Spacebars.mustache(view.lookup(\"ratingUp\"));                                                           // 153\n  })), HTML.Raw(\"&nbsp;\"), HTML.Raw(\"&nbsp;\"), \"\\n        \", HTML.P({                                             // 154\n    style: \"display:inline-block\"                                                                                 // 155\n  }, \"Down: \", Blaze.View(\"lookup:ratingDown\", function() {                                                       // 156\n    return Spacebars.mustache(view.lookup(\"ratingDown\"));                                                         // 157\n  })), HTML.Raw(\"&nbsp;\"), HTML.Raw(\"&nbsp;\"), \"\\n          \\n      \"), \"\\n    \"), \"\\n  \");                       // 158\n}));                                                                                                              // 159\n                                                                                                                  // 160\nTemplate.__checkName(\"website\");                                                                                  // 161\nTemplate[\"website\"] = new Template(\"Template.website\", (function() {                                              // 162\n  var view = this;                                                                                                // 163\n  return HTML.DIV({                                                                                               // 164\n    \"class\": \"container\"                                                                                          // 165\n  }, \"\\n    \", HTML.H2(Blaze.View(\"lookup:title\", function() {                                                    // 166\n    return Spacebars.mustache(view.lookup(\"title\"));                                                              // 167\n  })), \"\\n    \", HTML.P({                                                                                         // 168\n    style: \"font-style: italic\"                                                                                   // 169\n  }, Blaze.View(\"lookup:description\", function() {                                                                // 170\n    return Spacebars.mustache(view.lookup(\"description\"));                                                        // 171\n  })), HTML.Raw('\\n    <a href=\"#\" class=\"btn btn-success js-upvote\">\\n      <span class=\"glyphicon glyphicon-arrow-up\" aria-hidden=\"true\"></span>\\n    </a>\\n\\n    <a href=\"#\" class=\"btn btn-danger js-downvote\">\\n      <span class=\"glyphicon glyphicon-arrow-down\" aria-hidden=\"true\"></span>\\n    </a>\\n    &nbsp;    \\n    '), HTML.P({\n    style: \"display:inline-block\"                                                                                 // 173\n  }, \"Up: \", Blaze.View(\"lookup:ratingUp\", function() {                                                           // 174\n    return Spacebars.mustache(view.lookup(\"ratingUp\"));                                                           // 175\n  })), HTML.Raw(\"&nbsp;&nbsp;\\n    \"), HTML.P({                                                                   // 176\n    style: \"display:inline-block\"                                                                                 // 177\n  }, \"Down: \", Blaze.View(\"lookup:ratingDown\", function() {                                                       // 178\n    return Spacebars.mustache(view.lookup(\"ratingDown\"));                                                         // 179\n  })), HTML.Raw(\"&nbsp;&nbsp;\\n    \"), HTML.P(\"\\n      \", Blaze.If(function() {                                   // 180\n    return Spacebars.call(view.lookup(\"comments\"));                                                               // 181\n  }, function() {                                                                                                 // 182\n    return [ \"\\n        \", HTML.H4(\"Comments from users: \"), \"\\n      \" ];                                        // 183\n  }), \"\\n    \"), \"\\n    \", HTML.UL(\"\\n      \", Blaze.Each(function() {                                            // 184\n    return Spacebars.call(view.lookup(\"comments\"));                                                               // 185\n  }, function() {                                                                                                 // 186\n    return [ \"\\n          \", HTML.LI(HTML.SPAN({                                                                  // 187\n      \"class\": \"added-on\"                                                                                         // 188\n    }, Blaze.View(\"lookup:createdOn\", function() {                                                                // 189\n      return Spacebars.mustache(view.lookup(\"createdOn\"));                                                        // 190\n    }), \":\"), \" \", Blaze.View(\"lookup:comment\", function() {                                                      // 191\n      return Spacebars.mustache(view.lookup(\"comment\"));                                                          // 192\n    })), \"\\n      \" ];                                                                                            // 193\n  }), \"\\n    \"), HTML.Raw(\"\\n\\n    <!-- textarea for comments -->\\n    \"), HTML.FORM({                            // 194\n    id: \"comment\",                                                                                                // 195\n    style: \"display:inline-block\"                                                                                 // 196\n  }, \"\\n      \", HTML.TEXTAREA({                                                                                  // 197\n    name: \"name\",                                                                                                 // 198\n    rows: \"4\",                                                                                                    // 199\n    cols: \"30\",                                                                                                   // 200\n    autofocus: \"true\"                                                                                             // 201\n  }), HTML.Raw(\"<br>\"), \"\\n      \", HTML.Raw('<input type=\"submit\" class=\"btn btn-primary js-add-comment\" value=\"add comment\">'), \"\\n      \", HTML.Raw('<a style=\"display:inline-block\" href=\"/\" class=\"btn btn-default\">back to home</a>'), \"\\n    \"), \"\\n\\n  \");\n}));                                                                                                              // 203\n                                                                                                                  // 204\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"main.js\":function(){\n\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                //\n// client/main.js                                                                                                 //\n//                                                                                                                //\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                  //\nRouter.configure({                                                                                                // 1\n    layoutTemplate: 'ApplicationLayout'                                                                           // 2\n});                                                                                                               // 1\n                                                                                                                  //\nRouter.route('/', function () {                                                                                   // 5\n    this.render('navbar', { to: 'navbar' });                                                                      // 6\n    this.render('website_form', { to: 'website_form' });                                                          // 7\n    this.render('website_list', { to: 'main', data: { websites: Websites.find({}, { sort: { rating: -1 } }) } });\n});                                                                                                               // 9\n                                                                                                                  //\nRouter.route('/site/:_id', function () {                                                                          // 11\n    this.render('navbar', { to: 'navbar' });                                                                      // 12\n    this.render('website_detail', { to: 'main', data: Websites.findOne({ _id: this.params._id }) });              // 13\n    this.render('website_comments', { to: 'comments', data: { comments: Comments.find({ website_id: this.params._id }) } });\n});                                                                                                               // 15\n                                                                                                                  //\nRouter.route('/search/:_query', function () {                                                                     // 17\n    var query = this.params._query.toLowerCase();                                                                 // 18\n    var search_result = [];                                                                                       // 19\n    var websites = Websites.find().fetch();                                                                       // 20\n    for (var i in meteorBabelHelpers.sanitizeForInObject(websites)) {                                             // 21\n        if (websites[i].title.toLowerCase().search(query) >= 0 || websites[i].description.toLowerCase().search(query) >= 0) {\n            search_result.push(websites[i]);                                                                      // 23\n        }                                                                                                         // 24\n    }                                                                                                             // 25\n    console.log(search_result);                                                                                   // 26\n    this.render('navbar', { to: 'navbar' });                                                                      // 27\n    this.render('website_list', { to: 'main', data: { websites: search_result } });                               // 28\n});                                                                                                               // 29\n// template helper function                                                                                       //\nTemplate.website_list.helpers({                                                                                   // 31\n    websites: function () {                                                                                       // 32\n        function websites() {                                                                                     // 32\n            return Websites.find({}, { sort: { ratingUp: -1 } });                                                 // 33\n        }                                                                                                         // 34\n                                                                                                                  //\n        return websites;                                                                                          // 32\n    }()                                                                                                           // 32\n});                                                                                                               // 31\n                                                                                                                  //\nTemplate.website_list.helpers({                                                                                   // 37\n    comments: function () {                                                                                       // 38\n        function comments() {                                                                                     // 38\n            return Websites.find({});                                                                             // 39\n        }                                                                                                         // 40\n                                                                                                                  //\n        return comments;                                                                                          // 38\n    }()                                                                                                           // 38\n});                                                                                                               // 37\n                                                                                                                  //\nTemplate.registerHelper('formatDate', function (date) {                                                           // 43\n    return date.toLocaleDateString();                                                                             // 44\n});                                                                                                               // 45\n                                                                                                                  //\n/// acounts config                                                                                                //\nAccounts.ui.config({                                                                                              // 48\n    passwordSignupFields: \"USERNAME_AND_EMAIL\"                                                                    // 49\n});                                                                                                               // 48\n                                                                                                                  //\nTemplate.website_list.events({                                                                                    // 54\n    \"click .js-upvote\": function () {                                                                             // 55\n        function clickJsUpvote(event) {                                                                           // 55\n            // example of how you can access the id for the website in the database                               //\n            // (this is the data context for the template)                                                        //\n            var website_id = this._id;                                                                            // 58\n            console.log(\"Up voting website with id \" + website_id);                                               // 59\n            // put the code in here to add a vote to a website!                                                   //\n            old_rating = Websites.findOne({ _id: website_id }).rating;                                            // 61\n            if (old_rating == undefined) {                                                                        // 62\n                old_rating = 0;                                                                                   // 63\n            }                                                                                                     // 64\n            console.log(\"Site value is \" + old_rating);                                                           // 65\n            if (Meteor.user()) {                                                                                  // 66\n                Websites.update({ _id: website_id }, { $set: { rating: old_rating + 1 } });                       // 67\n            }                                                                                                     // 68\n                                                                                                                  //\n            return false; // prevent the button from reloading the page                                           // 71\n        }                                                                                                         // 72\n                                                                                                                  //\n        return clickJsUpvote;                                                                                     // 55\n    }(),                                                                                                          // 55\n    \"click .js-downvote\": function () {                                                                           // 73\n        function clickJsDownvote(event) {                                                                         // 73\n                                                                                                                  //\n            // example of how you can access the id for the website in the database                               //\n            // (this is the data context for the template)                                                        //\n            var website_id = this._id;                                                                            // 77\n            console.log(\"Down voting website with id \" + website_id);                                             // 78\n                                                                                                                  //\n            // put the code in here to remove a vote from a website!                                              //\n            old_rating = Websites.findOne({ _id: website_id }).rating;                                            // 81\n            if (old_rating == undefined) {                                                                        // 82\n                old_rating = 0;                                                                                   // 83\n            }                                                                                                     // 84\n            console.log(\"Site value is \" + old_rating);                                                           // 85\n            if (Meteor.user()) {                                                                                  // 86\n                Websites.update({ _id: website_id }, { $set: { rating: old_rating - 1 } });                       // 87\n            }                                                                                                     // 88\n                                                                                                                  //\n            return false; // prevent the button from reloading the page                                           // 91\n        }                                                                                                         // 92\n                                                                                                                  //\n        return clickJsDownvote;                                                                                   // 73\n    }()                                                                                                           // 73\n});                                                                                                               // 54\n                                                                                                                  //\nTemplate.website_form.events({                                                                                    // 95\n    \"click .js-toggle-website-form\": function () {                                                                // 96\n        function clickJsToggleWebsiteForm(event) {                                                                // 96\n            $(\"#website_form\").toggle('slow');                                                                    // 97\n        }                                                                                                         // 98\n                                                                                                                  //\n        return clickJsToggleWebsiteForm;                                                                          // 96\n    }(),                                                                                                          // 96\n    \"submit .js-save-website-form\": function () {                                                                 // 99\n        function submitJsSaveWebsiteForm(event) {                                                                 // 99\n                                                                                                                  //\n            // here is an example of how to get the url out of the form:                                          //\n            var url = event.target.url.value;                                                                     // 102\n            console.log(\"The url they entered is: \" + url);                                                       // 103\n                                                                                                                  //\n            //  put your website saving code in here!                                                             //\n            if (Meteor.user()) {                                                                                  // 106\n                Websites.insert({                                                                                 // 107\n                    url: event.target.url.value,                                                                  // 108\n                    title: event.target.title.value,                                                              // 109\n                    description: event.target.description.value,                                                  // 110\n                    createdBy: Meteor.user().username,                                                            // 111\n                    createdOn: new Date()                                                                         // 112\n                });                                                                                               // 107\n            }                                                                                                     // 114\n                                                                                                                  //\n            $(\"#website_form\").toggle('slow');                                                                    // 117\n                                                                                                                  //\n            return false; // stop the form submit from reloading the page                                         // 119\n        }                                                                                                         // 121\n                                                                                                                  //\n        return submitJsSaveWebsiteForm;                                                                           // 99\n    }()                                                                                                           // 99\n});                                                                                                               // 95\n                                                                                                                  //\nTemplate.website_detail.events({                                                                                  // 124\n    \"submit .js-save-comment-form\": function () {                                                                 // 125\n        function submitJsSaveCommentForm(event) {                                                                 // 125\n            var website_id = this._id;                                                                            // 126\n            if (Meteor.user()) {                                                                                  // 127\n                console.log(this._id);                                                                            // 128\n                Comments.insert({                                                                                 // 129\n                    website_id: website_id,                                                                       // 130\n                    comment: event.target.comment.value,                                                          // 131\n                    createdBy: Meteor.user().username,                                                            // 132\n                    createdOn: new Date()                                                                         // 133\n                });                                                                                               // 129\n            }                                                                                                     // 135\n                                                                                                                  //\n            return false;                                                                                         // 137\n        }                                                                                                         // 138\n                                                                                                                  //\n        return submitJsSaveCommentForm;                                                                           // 125\n    }()                                                                                                           // 125\n                                                                                                                  //\n});                                                                                                               // 124\n                                                                                                                  //\nTemplate.navbar.events({                                                                                          // 142\n    \"submit .js-search-form\": function () {                                                                       // 143\n        function submitJsSearchForm(event) {                                                                      // 143\n            console.log('/search/' + event.target.search.value);                                                  // 144\n            Router.go('/search/' + event.target.search.value);                                                    // 145\n            return false;                                                                                         // 146\n        }                                                                                                         // 147\n                                                                                                                  //\n        return submitJsSearchForm;                                                                                // 143\n    }()                                                                                                           // 143\n});                                                                                                               // 142\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"lib\":{\"collections.js\":function(){\n\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                //\n// lib/collections.js                                                                                             //\n//                                                                                                                //\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                  //\nWebsites = new Mongo.Collection(\"websites\");                                                                      // 1\n                                                                                                                  //\nComments = new Mongo.Collection(\"comments\");                                                                      // 3\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}}},{\"extensions\":[\".js\",\".json\",\".html\",\".css\"]});\nrequire(\"./client/template.main.js\");\nrequire(\"./lib/collections.js\");\nrequire(\"./client/main.js\");","servePath":"/app.js","sourceMap":{"version":3,"sources":["/client/template.main.js","/client/main.js","/lib/collections.js"],"names":[],"mappings":";;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wH;;;;;;;;;;;AC3MA,OAAO,SAAP,CAAiB;AACb,oBAAgB;AADH,CAAjB;;AAIA,OAAO,KAAP,CAAa,GAAb,EAAkB,YAAU;AACxB,SAAK,MAAL,CAAY,QAAZ,EAAsB,EAAC,IAAI,QAAL,EAAtB;AACA,SAAK,MAAL,CAAY,cAAZ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","file":"/app.js","sourcesContent":["\nTemplate.body.addContent((function() {\n  var view = this;\n  return \"\";\n}));\nMeteor.startup(Template.body.renderToDocument);\n\nTemplate.__checkName(\"AppLayout\");\nTemplate[\"AppLayout\"] = new Template(\"Template.AppLayout\", (function() {\n  var view = this;\n  return [ Blaze._TemplateWith(function() {\n    return \"navbar\";\n  }, function() {\n    return Spacebars.include(view.lookupTemplate(\"yield\"));\n  }), \"\\n    \", Blaze._TemplateWith(function() {\n    return \"main\";\n  }, function() {\n    return Spacebars.include(view.lookupTemplate(\"yield\"));\n  }), \"\\n    \", Blaze._TemplateWith(function() {\n    return \"form\";\n  }, function() {\n    return Spacebars.include(view.lookupTemplate(\"yield\"));\n  }), \"\\n    \", Blaze._TemplateWith(function() {\n    return \"list\";\n  }, function() {\n    return Spacebars.include(view.lookupTemplate(\"yield\"));\n  }) ];\n}));\n\nTemplate.__checkName(\"welcome\");\nTemplate[\"welcome\"] = new Template(\"Template.welcome\", (function() {\n  var view = this;\n  return HTML.DIV({\n    \"class\": \"container\"\n  }, \"\\n    \", HTML.H1(Blaze.View(\"lookup:username\", function() {\n    return Spacebars.mustache(view.lookup(\"username\"));\n  }), \", welcome to siteace\"), HTML.Raw(\"\\n    <br>\\n  \"));\n}));\n\nTemplate.__checkName(\"navbar\");\nTemplate[\"navbar\"] = new Template(\"Template.navbar\", (function() {\n  var view = this;\n  return [ HTML.Raw(\"<!-- navbar  - you will be putting the login functions here -->\\n  \"), HTML.NAV({\n    \"class\": \"navbar navbar-default\"\n  }, \"\\n    \", HTML.DIV({\n    \"class\": \"container\"\n  }, \"\\n      \", HTML.DIV({\n    \"class\": \"navbar-header\"\n  }, \"\\n        \", HTML.A({\n    \"class\": \"navbar-brand\",\n    href: \"#\"\n  }, \"\\n          Site Ace \", HTML.Raw(\"&nbsp;\"), \"\\n          \", Spacebars.include(view.lookupTemplate(\"loginButtons\")), \"\\n        \"), \"\\n      \"), \"\\n    \"), \"\\n  \") ];\n}));\n\nTemplate.__checkName(\"website_form\");\nTemplate[\"website_form\"] = new Template(\"Template.website_form\", (function() {\n  var view = this;\n  return Blaze.If(function() {\n    return Spacebars.call(view.lookup(\"currentUser\"));\n  }, function() {\n    return [ \"\\n  \", HTML.DIV({\n      \"class\": \"container\"\n    }, \"\\n    \", HTML.A({\n      \"class\": \"btn btn-default js-toggle-website-form\",\n      href: \"#\"\n    }, \"\\n        \", HTML.SPAN({\n      \"class\": \"glyphicon glyphicon-plus\",\n      \"aria-hidden\": \"true\"\n    }), \"\\n    \"), \"\\n    \", HTML.DIV({\n      id: \"website_form\",\n      \"class\": \"hidden_div\"\n    }, \"\\n      \", HTML.FORM({\n      \"class\": \"js-save-website-form\"\n    }, \"\\n        \", HTML.DIV({\n      \"class\": \"form-group\"\n    }, \"\\n          \", HTML.LABEL({\n      \"for\": \"url\"\n    }, \"Site address\"), \"\\n          \", HTML.INPUT({\n      type: \"text\",\n      \"class\": \"form-control\",\n      id: \"url\",\n      placeholder: \"http://www.mysite.com\"\n    }), \"\\n        \"), \"\\n        \", HTML.DIV({\n      \"class\": \"form-group\"\n    }, \"\\n          \", HTML.LABEL({\n      \"for\": \"title\"\n    }, \"Title\"), \"\\n          \", HTML.INPUT({\n      type: \"text\",\n      \"class\": \"form-control\",\n      id: \"title\",\n      placeholder: \"Mysite\"\n    }), \"\\n        \"), \"\\n          \", HTML.DIV({\n      \"class\": \"form-group\"\n    }, \"\\n          \", HTML.LABEL({\n      \"for\": \"description\"\n    }, \"Description\"), \"\\n          \", HTML.INPUT({\n      type: \"text\",\n      \"class\": \"form-control\",\n      id: \"description\",\n      placeholder: \"I found this site really useful for ...\"\n    }), \"\\n        \"), \"\\n\\n        \", HTML.BUTTON({\n      type: \"submit\",\n      \"class\": \"btn btn-default js-toggle-website-form-submit\"\n    }, \"Submit\"), \"\\n      \"), \"\\n    \"), \"\\n  \"), \"\\n  \", HTML.BR(), \"\\n  \" ];\n  });\n}));\n\nTemplate.__checkName(\"website_list\");\nTemplate[\"website_list\"] = new Template(\"Template.website_list\", (function() {\n  var view = this;\n  return HTML.OL(\"\\n  \", Blaze.Each(function() {\n    return Spacebars.call(view.lookup(\"websites\"));\n  }, function() {\n    return [ \"\\n   \", Spacebars.include(view.lookupTemplate(\"website_item\")), \"\\n  \" ];\n  }), \"\\n  \");\n}));\n\nTemplate.__checkName(\"website_item\");\nTemplate[\"website_item\"] = new Template(\"Template.website_item\", (function() {\n  var view = this;\n  return HTML.DIV({\n    \"class\": \"container\"\n  }, \"\\n    \", HTML.DIV({\n    \"class\": \"well\"\n  }, \"\\n      \", HTML.LI(\"\\n        \", HTML.A({\n    href: function() {\n      return Spacebars.mustache(view.lookup(\"url\"));\n    },\n    id: \"title\"\n  }, HTML.H3(Blaze.View(\"lookup:title\", function() {\n    return Spacebars.mustache(view.lookup(\"title\"));\n  }))), \"\\n        \", HTML.Raw(\"<br>\"), \"\\n        \", HTML.P({\n    \"class\": \"details\",\n    style: \"font-style: italic\"\n  }, \"\\n          \", Blaze.View(\"lookup:description\", function() {\n    return Spacebars.mustache(view.lookup(\"description\"));\n  }), \"\\n        \"), HTML.Raw(\"&nbsp;\"), HTML.Raw(\"&nbsp;\"), \"\\n          \", Blaze.If(function() {\n    return Spacebars.call(view.lookup(\"currentUser\"));\n  }, function() {\n    return [ \"\\n            \", HTML.A({\n      href: function() {\n        return [ \"/website_item/\", Spacebars.mustache(view.lookup(\"_id\")) ];\n      },\n      \"class\": \"btn btn-info js-details-button details\"\n    }, \"details\"), \"\\n          \" ];\n  }), \"\\n        \", HTML.Raw(\"<br>\"), HTML.Raw(\"<br>\"), \"\\n        \", HTML.P(\"\\n          \", HTML.SPAN({\n    \"class\": \"added-on\"\n  }, \"Added: \", Blaze.View(\"lookup:createdOn\", function() {\n    return Spacebars.mustache(view.lookup(\"createdOn\"));\n  })), \"\\n        \"), \"\\n\\n        \", HTML.Raw('<a href=\"#\" class=\"btn btn-success js-upvote\">\\n          <span class=\"glyphicon glyphicon-arrow-up\" aria-hidden=\"true\"></span>\\n        </a>'), \"\\n\\n        \", HTML.Raw('<a href=\"#\" class=\"btn btn-danger js-downvote\">\\n          <span class=\"glyphicon glyphicon-arrow-down\" aria-hidden=\"true\"></span>\\n        </a>'), \"\\n        \", HTML.Raw(\"<!-- you will be putting your up and down vote buttons in here! -->\"), \"\\n        \", HTML.Raw(\"&nbsp;\"), \"\\n        \", HTML.P({\n    style: \"display:inline-block\"\n  }, \"Up: \", Blaze.View(\"lookup:ratingUp\", function() {\n    return Spacebars.mustache(view.lookup(\"ratingUp\"));\n  })), HTML.Raw(\"&nbsp;\"), HTML.Raw(\"&nbsp;\"), \"\\n        \", HTML.P({\n    style: \"display:inline-block\"\n  }, \"Down: \", Blaze.View(\"lookup:ratingDown\", function() {\n    return Spacebars.mustache(view.lookup(\"ratingDown\"));\n  })), HTML.Raw(\"&nbsp;\"), HTML.Raw(\"&nbsp;\"), \"\\n          \\n      \"), \"\\n    \"), \"\\n  \");\n}));\n\nTemplate.__checkName(\"website\");\nTemplate[\"website\"] = new Template(\"Template.website\", (function() {\n  var view = this;\n  return HTML.DIV({\n    \"class\": \"container\"\n  }, \"\\n    \", HTML.H2(Blaze.View(\"lookup:title\", function() {\n    return Spacebars.mustache(view.lookup(\"title\"));\n  })), \"\\n    \", HTML.P({\n    style: \"font-style: italic\"\n  }, Blaze.View(\"lookup:description\", function() {\n    return Spacebars.mustache(view.lookup(\"description\"));\n  })), HTML.Raw('\\n    <a href=\"#\" class=\"btn btn-success js-upvote\">\\n      <span class=\"glyphicon glyphicon-arrow-up\" aria-hidden=\"true\"></span>\\n    </a>\\n\\n    <a href=\"#\" class=\"btn btn-danger js-downvote\">\\n      <span class=\"glyphicon glyphicon-arrow-down\" aria-hidden=\"true\"></span>\\n    </a>\\n    &nbsp;    \\n    '), HTML.P({\n    style: \"display:inline-block\"\n  }, \"Up: \", Blaze.View(\"lookup:ratingUp\", function() {\n    return Spacebars.mustache(view.lookup(\"ratingUp\"));\n  })), HTML.Raw(\"&nbsp;&nbsp;\\n    \"), HTML.P({\n    style: \"display:inline-block\"\n  }, \"Down: \", Blaze.View(\"lookup:ratingDown\", function() {\n    return Spacebars.mustache(view.lookup(\"ratingDown\"));\n  })), HTML.Raw(\"&nbsp;&nbsp;\\n    \"), HTML.P(\"\\n      \", Blaze.If(function() {\n    return Spacebars.call(view.lookup(\"comments\"));\n  }, function() {\n    return [ \"\\n        \", HTML.H4(\"Comments from users: \"), \"\\n      \" ];\n  }), \"\\n    \"), \"\\n    \", HTML.UL(\"\\n      \", Blaze.Each(function() {\n    return Spacebars.call(view.lookup(\"comments\"));\n  }, function() {\n    return [ \"\\n          \", HTML.LI(HTML.SPAN({\n      \"class\": \"added-on\"\n    }, Blaze.View(\"lookup:createdOn\", function() {\n      return Spacebars.mustache(view.lookup(\"createdOn\"));\n    }), \":\"), \" \", Blaze.View(\"lookup:comment\", function() {\n      return Spacebars.mustache(view.lookup(\"comment\"));\n    })), \"\\n      \" ];\n  }), \"\\n    \"), HTML.Raw(\"\\n\\n    <!-- textarea for comments -->\\n    \"), HTML.FORM({\n    id: \"comment\",\n    style: \"display:inline-block\"\n  }, \"\\n      \", HTML.TEXTAREA({\n    name: \"name\",\n    rows: \"4\",\n    cols: \"30\",\n    autofocus: \"true\"\n  }), HTML.Raw(\"<br>\"), \"\\n      \", HTML.Raw('<input type=\"submit\" class=\"btn btn-primary js-add-comment\" value=\"add comment\">'), \"\\n      \", HTML.Raw('<a style=\"display:inline-block\" href=\"/\" class=\"btn btn-default\">back to home</a>'), \"\\n    \"), \"\\n\\n  \");\n}));\n","Router.configure({\n    layoutTemplate: 'ApplicationLayout'\n});\n\nRouter.route('/', function(){\n    this.render('navbar', {to: 'navbar'});\n    this.render('website_form', {to: 'website_form'});\n    this.render('website_list', {to: 'main', data: {websites: Websites.find({}, {sort: {rating: -1}})}});\n});\n\nRouter.route('/site/:_id', function() {\n    this.render('navbar', {to: 'navbar'});\n    this.render('website_detail', {to: 'main', data: Websites.findOne({_id:this.params._id})});\n    this.render('website_comments', {to: 'comments', data: {comments: Comments.find({website_id: this.params._id})}});\n});\n\nRouter.route('/search/:_query', function() {\n    var query = this.params._query.toLowerCase();\n    var search_result = [];\n    var websites = Websites.find().fetch()\n    for (var i in websites) {\n        if(websites[i].title.toLowerCase().search(query)>=0 || websites[i].description.toLowerCase().search(query)>=0) {\n            search_result.push(websites[i]);\n        }\n    }\n    console.log(search_result);\n    this.render('navbar', {to: 'navbar'});\n    this.render('website_list', {to: 'main', data: {websites: search_result}});\n});\n// template helper function\nTemplate.website_list.helpers({\n        websites:function(){\n            return Websites.find({}, {sort: {ratingUp:-1}});\n        },\n    });\n\nTemplate.website_list.helpers({\n        comments:function(){\n            return Websites.find({});\n        },\n    });\n\nTemplate.registerHelper('formatDate', function(date) {\n    return date.toLocaleDateString();\n});\n\n/// acounts config\nAccounts.ui.config({\n    passwordSignupFields: \"USERNAME_AND_EMAIL\"\n});\n\n\n\nTemplate.website_list.events({\n    \"click .js-upvote\":function(event) {\n        // example of how you can access the id for the website in the database\n        // (this is the data context for the template)\n        var website_id = this._id;\n        console.log(\"Up voting website with id \"+website_id);\n        // put the code in here to add a vote to a website!\n        old_rating = Websites.findOne({_id: website_id}).rating;\n        if(old_rating == undefined) {\n            old_rating = 0;\n        }\n        console.log(\"Site value is \" + old_rating);\n        if(Meteor.user()) {\n            Websites.update({_id: website_id}, {$set: {rating: old_rating + 1}});\n        }\n        \n\n        return false;// prevent the button from reloading the page\n    },\n    \"click .js-downvote\":function(event) {\n\n        // example of how you can access the id for the website in the database\n        // (this is the data context for the template)\n        var website_id = this._id;\n        console.log(\"Down voting website with id \"+website_id);\n\n        // put the code in here to remove a vote from a website!\n        old_rating = Websites.findOne({_id: website_id}).rating;\n        if(old_rating == undefined) {\n            old_rating = 0;\n        }\n        console.log(\"Site value is \" + old_rating);\n        if(Meteor.user()) {\n            Websites.update({_id: website_id}, {$set: {rating: old_rating - 1}});\n        }\n        \n\n        return false;// prevent the button from reloading the page\n    }\n})\n\nTemplate.website_form.events({\n    \"click .js-toggle-website-form\":function(event){\n        $(\"#website_form\").toggle('slow');\n    },\n    \"submit .js-save-website-form\":function(event){\n\n        // here is an example of how to get the url out of the form:\n        var url = event.target.url.value;\n        console.log(\"The url they entered is: \"+url);\n\n        //  put your website saving code in here!\n        if(Meteor.user()) {\n            Websites.insert({\n                url: event.target.url.value,\n                title: event.target.title.value,\n                description: event.target.description.value,\n                createdBy: Meteor.user().username,\n                createdOn: new Date()\n            });\n        }\n        \n\n        $(\"#website_form\").toggle('slow');\n\n        return false;// stop the form submit from reloading the page\n\n    }\n});\n\nTemplate.website_detail.events({\n    \"submit .js-save-comment-form\": function(event) {\n        var website_id = this._id;\n        if(Meteor.user()) {\n            console.log(this._id);\n            Comments.insert({\n                website_id: website_id,\n                comment: event.target.comment.value,\n                createdBy: Meteor.user().username,\n                createdOn: new Date()\n            });\n        }\n        \n        return false;\n    },\n\n});\n\nTemplate.navbar.events({\n    \"submit .js-search-form\": function(event) {\n        console.log('/search/' + event.target.search.value);\n        Router.go('/search/' + event.target.search.value);\n        return false;\n    },\n});\n","Websites = new Mongo.Collection(\"websites\");\r\n\r\nComments = new Mongo.Collection(\"comments\");\r\n\r\n"]}}]