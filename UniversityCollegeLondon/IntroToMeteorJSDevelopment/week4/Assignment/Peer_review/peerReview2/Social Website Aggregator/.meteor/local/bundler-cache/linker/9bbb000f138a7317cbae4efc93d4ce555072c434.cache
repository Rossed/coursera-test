[{"type":"js","data":"/* Imports for global scope */\n\nMongo = Package.mongo.Mongo;\nReactiveVar = Package['reactive-var'].ReactiveVar;\n$ = Package.jquery.$;\njQuery = Package.jquery.jQuery;\nTracker = Package.tracker.Tracker;\nDeps = Package.tracker.Deps;\nRouter = Package['iron:router'].Router;\nRouteController = Package['iron:router'].RouteController;\nHTTP = Package.http.HTTP;\nmoment = Package['momentjs:moment'].moment;\nMeteor = Package.meteor.Meteor;\nglobal = Package.meteor.global;\nmeteorEnv = Package.meteor.meteorEnv;\nWebApp = Package.webapp.WebApp;\n_ = Package.underscore._;\nDDP = Package['ddp-client'].DDP;\nLaunchScreen = Package['launch-screen'].LaunchScreen;\nBlaze = Package.ui.Blaze;\nUI = Package.ui.UI;\nHandlebars = Package.ui.Handlebars;\nSpacebars = Package.spacebars.Spacebars;\nTemplate = Package.templating.Template;\nmeteorInstall = Package.modules.meteorInstall;\nBuffer = Package.modules.Buffer;\nprocess = Package.modules.process;\nSymbol = Package['ecmascript-runtime'].Symbol;\nMap = Package['ecmascript-runtime'].Map;\nSet = Package['ecmascript-runtime'].Set;\nmeteorBabelHelpers = Package['babel-runtime'].meteorBabelHelpers;\nPromise = Package.promise.Promise;\nIron = Package['iron:core'].Iron;\nAccounts = Package['accounts-base'].Accounts;\nAutoupdate = Package.autoupdate.Autoupdate;\nReload = Package.reload.Reload;\nHTML = Package.htmljs.HTML;\n\n","servePath":"/packages/global-imports.js"},{"type":"js","data":"var require = meteorInstall({\"client\":{\"template.main.js\":function(){\n\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                    //\n// client/template.main.js                                                                                            //\n//                                                                                                                    //\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                      //\n                                                                                                                      // 1\nTemplate.body.addContent((function() {                                                                                // 2\n  var view = this;                                                                                                    // 3\n  return HTML.Raw(\"<!-- navbar  - you will be putting the login functions here -->\");                                 // 4\n}));                                                                                                                  // 5\nMeteor.startup(Template.body.renderToDocument);                                                                       // 6\n                                                                                                                      // 7\nTemplate.__checkName(\"ApplicationLayout\");                                                                            // 8\nTemplate[\"ApplicationLayout\"] = new Template(\"Template.ApplicationLayout\", (function() {                              // 9\n  var view = this;                                                                                                    // 10\n  return [ Blaze._TemplateWith(function() {                                                                           // 11\n    return \"navbar\";                                                                                                  // 12\n  }, function() {                                                                                                     // 13\n    return Spacebars.include(view.lookupTemplate(\"yield\"));                                                           // 14\n  }), \"\\n\t\t  \", HTML.DIV({                                                                                            // 15\n    \"class\": \"container\"                                                                                              // 16\n  }, \"\\n\t\t\t\", Blaze._TemplateWith(function() {                                                                        // 17\n    return \"website_form\";                                                                                            // 18\n  }, function() {                                                                                                     // 19\n    return Spacebars.include(view.lookupTemplate(\"yield\"));                                                           // 20\n  }), \"\\n\t\t\t\", Blaze._TemplateWith(function() {                                                                       // 21\n    return \"main\";                                                                                                    // 22\n  }, function() {                                                                                                     // 23\n    return Spacebars.include(view.lookupTemplate(\"yield\"));                                                           // 24\n  }), \"\\n\t\t\t\", Blaze._TemplateWith(function() {                                                                       // 25\n    return \"comments\";                                                                                                // 26\n  }, function() {                                                                                                     // 27\n    return Spacebars.include(view.lookupTemplate(\"yield\"));                                                           // 28\n  }), \"\\n\t\t\t\", Spacebars.include(view.lookupTemplate(\"modal\")), \"\\n\t\t  \") ];                                          // 29\n}));                                                                                                                  // 30\n                                                                                                                      // 31\nTemplate.__checkName(\"modal\");                                                                                        // 32\nTemplate[\"modal\"] = new Template(\"Template.modal\", (function() {                                                      // 33\n  var view = this;                                                                                                    // 34\n  return HTML.Raw('<div class=\"modal fade\" id=\"modal-dialog\" role=\"dialog\">\\n\t\t\t<div class=\"modal-dialog\">\\n\t\t\t  <div class=\"modal-content\">\\n\t\t\t\t<div class=\"modal-header\">\\n\t\t\t\t  <button type=\"button\" class=\"close\" data-dismiss=\"modal\">&times;</button>\\n\t\t\t\t</div>\\n\t\t\t\t<div class=\"modal-body\" id=\"dialog-body\">\\n\t\t\t\t  You must be login first.\\n\t\t\t\t</div>\\n\t\t\t  </div>\\n\t\t\t</div>\\n\t\t  </div>');\n}));                                                                                                                  // 36\n                                                                                                                      // 37\nTemplate.__checkName(\"navbar\");                                                                                       // 38\nTemplate[\"navbar\"] = new Template(\"Template.navbar\", (function() {                                                    // 39\n  var view = this;                                                                                                    // 40\n  return HTML.Raw('<nav class=\"navbar navbar-default\">\\n\t\t  <a class=\"navbar-brand\" href=\"/\">Social Website Aggregator</a>\\n\t\t  \\n\t\t\t<div class=\"container-fluid\">\\n\t\t\t\\n\t\t\t  <div class=\"navbar-header\">\\n\t\t\t\t\\n\t\t\t  </div>\\n\t\t\t  <form class=\"navbar-form navbar-right js-search-form\">\\n\t\t\t\t<input type=\"text\" id=\"search\">\\n\t\t\t\t<button type=\"submit\">Search</button>\\n\t\t\t  </form>\\n\t\t\t</div>\\n\t\t  </nav>');\n}));                                                                                                                  // 42\n                                                                                                                      // 43\nTemplate.__checkName(\"_loginButtonsLoggedInDropdown\");                                                                // 44\nTemplate[\"_loginButtonsLoggedInDropdown\"] = new Template(\"Template._loginButtonsLoggedInDropdown\", (function() {      // 45\n  var view = this;                                                                                                    // 46\n  return HTML.LI({                                                                                                    // 47\n    id: \"login-dropdown-list\",                                                                                        // 48\n    \"class\": \"dropdown\"                                                                                               // 49\n  }, \"\\n    \", HTML.A({                                                                                               // 50\n    \"class\": \"dropdown-toggle\",                                                                                       // 51\n    href: \"#\",                                                                                                        // 52\n    \"data-toggle\": \"dropdown\"                                                                                         // 53\n  }, \"\\n      \", Blaze.View(\"lookup:displayName\", function() {                                                        // 54\n    return Spacebars.mustache(view.lookup(\"displayName\"));                                                            // 55\n  }), \"\\n      \", HTML.Raw('<b class=\"caret\"></b>'), \"\\n    \"), \"\\n    \", HTML.DIV({                                  // 56\n    \"class\": \"dropdown-menu col-sm-3\"                                                                                 // 57\n  }, \"\\n      \", Blaze.If(function() {                                                                                // 58\n    return Spacebars.call(view.lookup(\"inMessageOnlyFlow\"));                                                          // 59\n  }, function() {                                                                                                     // 60\n    return [ \"\\n        \", Spacebars.include(view.lookupTemplate(\"_loginButtonsMessages\")), \"\\n      \" ];             // 61\n  }, function() {                                                                                                     // 62\n    return [ \"\\n        \", Blaze.If(function() {                                                                      // 63\n      return Spacebars.call(view.lookup(\"inChangePasswordFlow\"));                                                     // 64\n    }, function() {                                                                                                   // 65\n      return [ \"\\n          \", Spacebars.include(view.lookupTemplate(\"_loginButtonsChangePassword\")), \"\\n        \" ];\n    }, function() {                                                                                                   // 67\n      return [ \"\\n          \", Spacebars.include(view.lookupTemplate(\"_loginButtonsLoggedInDropdownActions\")), \"\\n        \" ];\n    }), \"\\n      \" ];                                                                                                 // 69\n  }), \"\\n    \"), \"\\n  \");                                                                                             // 70\n}));                                                                                                                  // 71\n                                                                                                                      // 72\nTemplate.__checkName(\"_loginButtonsLoggedInDropdownActions\");                                                         // 73\nTemplate[\"_loginButtonsLoggedInDropdownActions\"] = new Template(\"Template._loginButtonsLoggedInDropdownActions\", (function() {\n  var view = this;                                                                                                    // 75\n  return [ Blaze.If(function() {                                                                                      // 76\n    return Spacebars.call(view.lookup(\"allowChangingPassword\"));                                                      // 77\n  }, function() {                                                                                                     // 78\n    return [ \"\\n    \", HTML.BUTTON({                                                                                  // 79\n      \"class\": \"btn btn-default btn-block\",                                                                           // 80\n      id: \"login-buttons-open-change-password\"                                                                        // 81\n    }, \"Change password\"), \"\\n  \" ];                                                                                  // 82\n  }), HTML.Raw('\\n  <button class=\"btn btn-block btn-primary\" id=\"login-buttons-logout\">Sign out</button>') ];        // 83\n}));                                                                                                                  // 84\n                                                                                                                      // 85\nTemplate.__checkName(\"_loginButtonsLoggedOutDropdown\");                                                               // 86\nTemplate[\"_loginButtonsLoggedOutDropdown\"] = new Template(\"Template._loginButtonsLoggedOutDropdown\", (function() {    // 87\n  var view = this;                                                                                                    // 88\n  return HTML.LI({                                                                                                    // 89\n    id: \"login-dropdown-list\",                                                                                        // 90\n    \"class\": \"dropdown\"                                                                                               // 91\n  }, \"\\n    \", HTML.A({                                                                                               // 92\n    \"class\": \"dropdown-toggle\",                                                                                       // 93\n    href: \"#\",                                                                                                        // 94\n    \"data-toggle\": \"dropdown\"                                                                                         // 95\n  }, \"\\n      Sign In\", Blaze.Unless(function() {                                                                     // 96\n    return Spacebars.call(view.lookup(\"forbidClientAccountCreation\"));                                                // 97\n  }, function() {                                                                                                     // 98\n    return \" / Up\";                                                                                                   // 99\n  }), \"\\n      \", HTML.Raw('<b class=\"caret\"></b>'), \"\\n    \"), \"\\n    \", HTML.DIV({                                  // 100\n    \"class\": \"dropdown-menu\"                                                                                          // 101\n  }, \"\\n      \", Spacebars.include(view.lookupTemplate(\"_loginButtonsLoggedOutAllServices\")), \"\\n    \"), \"\\n  \");     // 102\n}));                                                                                                                  // 103\n                                                                                                                      // 104\nTemplate.__checkName(\"_loginButtonsLoggedOutAllServices\");                                                            // 105\nTemplate[\"_loginButtonsLoggedOutAllServices\"] = new Template(\"Template._loginButtonsLoggedOutAllServices\", (function() {\n  var view = this;                                                                                                    // 107\n  return Blaze.Each(function() {                                                                                      // 108\n    return Spacebars.call(view.lookup(\"services\"));                                                                   // 109\n  }, function() {                                                                                                     // 110\n    return [ \"\\n  \", Blaze.Unless(function() {                                                                        // 111\n      return Spacebars.call(view.lookup(\"hasPasswordService\"));                                                       // 112\n    }, function() {                                                                                                   // 113\n      return [ \"\\n    \", Spacebars.include(view.lookupTemplate(\"_loginButtonsMessages\")), \"\\n  \" ];                   // 114\n    }), \"\\n    \", Blaze.If(function() {                                                                               // 115\n      return Spacebars.call(view.lookup(\"isPasswordService\"));                                                        // 116\n    }, function() {                                                                                                   // 117\n      return [ \"\\n      \", Blaze.If(function() {                                                                      // 118\n        return Spacebars.call(view.lookup(\"hasOtherServices\"));                                                       // 119\n      }, function() {                                                                                                 // 120\n        return [ \" \\n        \", Spacebars.include(view.lookupTemplate(\"_loginButtonsLoggedOutPasswordServiceSeparator\")), \"\\n      \" ];\n      }), \"\\n      \", Spacebars.include(view.lookupTemplate(\"_loginButtonsLoggedOutPasswordService\")), \"\\n    \" ];    // 122\n    }, function() {                                                                                                   // 123\n      return [ \"\\n      \", Spacebars.include(view.lookupTemplate(\"_loginButtonsLoggedOutSingleLoginButton\")), \"\\n    \" ];\n    }), \"\\n  \" ];                                                                                                     // 125\n  });                                                                                                                 // 126\n}));                                                                                                                  // 127\n                                                                                                                      // 128\nTemplate.__checkName(\"_loginButtonsLoggedOutPasswordServiceSeparator\");                                               // 129\nTemplate[\"_loginButtonsLoggedOutPasswordServiceSeparator\"] = new Template(\"Template._loginButtonsLoggedOutPasswordServiceSeparator\", (function() {\n  var view = this;                                                                                                    // 131\n  return HTML.Raw('<div class=\"or\">\\n    <span class=\"hline\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>\\n    <span class=\"or-text\">or</span>\\n    <span class=\"hline\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>\\n  </div>');\n}));                                                                                                                  // 133\n                                                                                                                      // 134\nTemplate.__checkName(\"_loginButtonsLoggedOutPasswordService\");                                                        // 135\nTemplate[\"_loginButtonsLoggedOutPasswordService\"] = new Template(\"Template._loginButtonsLoggedOutPasswordService\", (function() {\n  var view = this;                                                                                                    // 137\n  return Blaze.If(function() {                                                                                        // 138\n    return Spacebars.call(view.lookup(\"inForgotPasswordFlow\"));                                                       // 139\n  }, function() {                                                                                                     // 140\n    return [ \"\\n    \", Spacebars.include(view.lookupTemplate(\"_forgotPasswordForm\")), \"\\n  \" ];                       // 141\n  }, function() {                                                                                                     // 142\n    return [ \"\\n    \", Spacebars.include(view.lookupTemplate(\"_loginButtonsMessages\")), \"\\n    \", Blaze.Each(function() {\n      return Spacebars.call(view.lookup(\"fields\"));                                                                   // 144\n    }, function() {                                                                                                   // 145\n      return [ \"\\n      \", Spacebars.include(view.lookupTemplate(\"_loginButtonsFormField\")), \"\\n    \" ];              // 146\n    }), \"\\n    \", HTML.BUTTON({                                                                                       // 147\n      \"class\": \"btn btn-primary col-sm-12\",                                                                           // 148\n      id: \"login-buttons-password\",                                                                                   // 149\n      type: \"button\"                                                                                                  // 150\n    }, \"\\n      \", Blaze.If(function() {                                                                              // 151\n      return Spacebars.call(view.lookup(\"inSignupFlow\"));                                                             // 152\n    }, function() {                                                                                                   // 153\n      return \"\\n        Create\\n      \";                                                                              // 154\n    }, function() {                                                                                                   // 155\n      return \"\\n        Sign in\\n      \";                                                                             // 156\n    }), \"\\n    \"), \"\\n    \", Blaze.If(function() {                                                                    // 157\n      return Spacebars.call(view.lookup(\"inLoginFlow\"));                                                              // 158\n    }, function() {                                                                                                   // 159\n      return [ \"\\n      \", HTML.DIV({                                                                                 // 160\n        id: \"login-other-options\"                                                                                     // 161\n      }, \"\\n      \", Blaze.If(function() {                                                                            // 162\n        return Spacebars.call(view.lookup(\"showForgotPasswordLink\"));                                                 // 163\n      }, function() {                                                                                                 // 164\n        return [ \"\\n        \", HTML.A({                                                                               // 165\n          id: \"forgot-password-link\",                                                                                 // 166\n          \"class\": \"pull-left\",                                                                                       // 167\n          href: \"#\"                                                                                                   // 168\n        }, \"Forgot password?\"), \"\\n      \" ];                                                                         // 169\n      }), \"\\n      \", Blaze.If(function() {                                                                           // 170\n        return Spacebars.call(view.lookup(\"showCreateAccountLink\"));                                                  // 171\n      }, function() {                                                                                                 // 172\n        return [ \"\\n        \", HTML.A({                                                                               // 173\n          id: \"signup-link\",                                                                                          // 174\n          \"class\": \"pull-right\",                                                                                      // 175\n          href: \"#\"                                                                                                   // 176\n        }, \"Create account\"), \"\\n      \" ];                                                                           // 177\n      }), \"\\n      \"), \"\\n    \" ];                                                                                    // 178\n    }), \"\\n    \", Blaze.If(function() {                                                                               // 179\n      return Spacebars.call(view.lookup(\"inSignupFlow\"));                                                             // 180\n    }, function() {                                                                                                   // 181\n      return [ \"\\n      \", Spacebars.include(view.lookupTemplate(\"_loginButtonsBackToLoginLink\")), \"\\n    \" ];        // 182\n    }), \"\\n  \" ];                                                                                                     // 183\n  });                                                                                                                 // 184\n}));                                                                                                                  // 185\n                                                                                                                      // 186\nTemplate.__checkName(\"_forgotPasswordForm\");                                                                          // 187\nTemplate[\"_forgotPasswordForm\"] = new Template(\"Template._forgotPasswordForm\", (function() {                          // 188\n  var view = this;                                                                                                    // 189\n  return HTML.DIV({                                                                                                   // 190\n    \"class\": \"login-form\"                                                                                             // 191\n  }, \"\\n    \", Spacebars.include(view.lookupTemplate(\"_loginButtonsMessages\")), HTML.Raw('\\n    <div id=\"forgot-password-email-label-and-input\"> \\n      <input id=\"forgot-password-email\" type=\"email\" placeholder=\"E-mail\" class=\"form-control\">\\n    </div>\\n    <button class=\"btn btn-primary login-button-form-submit col-sm-12\" id=\"login-buttons-forgot-password\">Reset password</button>\\n    '), Spacebars.include(view.lookupTemplate(\"_loginButtonsBackToLoginLink\")), \"\\n  \");\n}));                                                                                                                  // 193\n                                                                                                                      // 194\nTemplate.__checkName(\"_loginButtonsBackToLoginLink\");                                                                 // 195\nTemplate[\"_loginButtonsBackToLoginLink\"] = new Template(\"Template._loginButtonsBackToLoginLink\", (function() {        // 196\n  var view = this;                                                                                                    // 197\n  return HTML.Raw('<button id=\"back-to-login-link\" class=\"btn btn-default col-sm-12\">Cancel</button>');               // 198\n}));                                                                                                                  // 199\n                                                                                                                      // 200\nTemplate.__checkName(\"_loginButtonsFormField\");                                                                       // 201\nTemplate[\"_loginButtonsFormField\"] = new Template(\"Template._loginButtonsFormField\", (function() {                    // 202\n  var view = this;                                                                                                    // 203\n  return Blaze.If(function() {                                                                                        // 204\n    return Spacebars.call(view.lookup(\"visible\"));                                                                    // 205\n  }, function() {                                                                                                     // 206\n    return [ \"\\n    \", HTML.INPUT({                                                                                   // 207\n      id: function() {                                                                                                // 208\n        return [ \"login-\", Spacebars.mustache(view.lookup(\"fieldName\")) ];                                            // 209\n      },                                                                                                              // 210\n      type: function() {                                                                                              // 211\n        return Spacebars.mustache(view.lookup(\"inputType\"));                                                          // 212\n      },                                                                                                              // 213\n      placeholder: function() {                                                                                       // 214\n        return Spacebars.mustache(view.lookup(\"fieldLabel\"));                                                         // 215\n      },                                                                                                              // 216\n      \"class\": \"form-control\"                                                                                         // 217\n    }), \"\\n  \" ];                                                                                                     // 218\n  });                                                                                                                 // 219\n}));                                                                                                                  // 220\n                                                                                                                      // 221\nTemplate.__checkName(\"_loginButtonsChangePassword\");                                                                  // 222\nTemplate[\"_loginButtonsChangePassword\"] = new Template(\"Template._loginButtonsChangePassword\", (function() {          // 223\n  var view = this;                                                                                                    // 224\n  return [ Spacebars.include(view.lookupTemplate(\"_loginButtonsMessages\")), \"\\n  \", Blaze.Each(function() {           // 225\n    return Spacebars.call(view.lookup(\"fields\"));                                                                     // 226\n  }, function() {                                                                                                     // 227\n    return [ \"\\n    \", Spacebars.include(view.lookupTemplate(\"_loginButtonsFormField\")), \"\\n  \" ];                    // 228\n  }), HTML.Raw('\\n  <button class=\"btn btn-primary\" id=\"login-buttons-do-change-password\">Change password</button>\\n  <button class=\"btn btn-default login-close\">Close</button>') ];\n}));                                                                                                                  // 230\n                                                                                                                      // 231\nTemplate.__checkName(\"website_form\");                                                                                 // 232\nTemplate[\"website_form\"] = new Template(\"Template.website_form\", (function() {                                        // 233\n  var view = this;                                                                                                    // 234\n  return HTML.Raw('<a class=\"btn btn-default js-toggle-website-form\" href=\"#\">\\n\t\t\t  <span><strong>Add new</strong></span>\\n\t\t  </a>\\n\t\t  <div id=\"website_form\" class=\"hidden_div\">\\n\t\t\t<form class=\"js-save-website-form\">\\n\t\t\t  <div class=\"form-group\">\\n\t\t\t\t<label for=\"url\">Site address</label>\\n\t\t\t\t<input type=\"text\" class=\"form-control\" id=\"url\" placeholder=\"http://www.mysite.com\">\\n\t\t\t  </div>\\n\t\t\t  <div class=\"form-group\">\\n\t\t\t\t<label for=\"title\">Title</label>\\n\t\t\t\t<input type=\"text\" class=\"form-control\" id=\"title\" placeholder=\"Mysite\">\\n\t\t\t  </div>\\n\t\t\t  <div class=\"form-group\">\\n\t\t\t\t<label for=\"description\">Description</label>\\n\t\t\t\t<input type=\"text\" class=\"form-control\" id=\"description\" placeholder=\"I found this site really useful for ...\">\\n\t\t\t  </div>\\n\\n\t\t\t  <button type=\"submit\" class=\"btn btn-default\">Submit</button>\\n\t\t\t</form>\\n\t\t  </div>');\n}));                                                                                                                  // 236\n                                                                                                                      // 237\nTemplate.__checkName(\"website_list\");                                                                                 // 238\nTemplate[\"website_list\"] = new Template(\"Template.website_list\", (function() {                                        // 239\n  var view = this;                                                                                                    // 240\n  return HTML.DIV(\"\\n\t\t  \", Blaze.Each(function() {                                                                   // 241\n    return Spacebars.call(view.lookup(\"websites\"));                                                                   // 242\n  }, function() {                                                                                                     // 243\n    return [ \"\\n\t\t\t\", HTML.DIV({                                                                                      // 244\n      \"class\": \"card\"                                                                                                 // 245\n    }, \"\\n\t\t\t  \", HTML.SPAN({                                                                                         // 246\n      \"class\": \"rank\"                                                                                                 // 247\n    }, Blaze.View(\"lookup:@index\", function() {                                                                       // 248\n      return Spacebars.mustache(view.lookup(\"@index\"));                                                               // 249\n    })), \"\\n\t\t\t  \", HTML.DIV({                                                                                        // 250\n      \"class\": \"column-middle\"                                                                                        // 251\n    }, \"\\n\t\t\t\t\", HTML.A({                                                                                             // 252\n      href: \"#\",                                                                                                      // 253\n      \"class\": \"btn btn-success js-upvote\"                                                                            // 254\n    }, \"\\n\t\t\t\t  \", HTML.SPAN({                                                                                        // 255\n      \"class\": \"glyphicon glyphicon-hand-up\",                                                                         // 256\n      \"aria-hidden\": \"true\"                                                                                           // 257\n    }), \"\\n\t\t\t\t\"), \"\\n\t\t\t\t\", HTML.SPAN(Blaze.If(function() {                                                          // 258\n      return Spacebars.call(view.lookup(\"rating\"));                                                                   // 259\n    }, function() {                                                                                                   // 260\n      return Blaze.View(\"lookup:rating\", function() {                                                                 // 261\n        return Spacebars.mustache(view.lookup(\"rating\"));                                                             // 262\n      });                                                                                                             // 263\n    }, function() {                                                                                                   // 264\n      return \"0\";                                                                                                     // 265\n    })), \"\\n\t\t\t\t\", HTML.A({                                                                                           // 266\n      href: \"#\",                                                                                                      // 267\n      \"class\": \"btn btn-danger js-downvote\"                                                                           // 268\n    }, \"\\n\t\t\t\t  \", HTML.SPAN({                                                                                        // 269\n      \"class\": \"glyphicon glyphicon-hand-down\",                                                                       // 270\n      \"aria-hidden\": \"true\"                                                                                           // 271\n    }), \"\\n\t\t\t\t\"), \"\\n\t\t\t  \"), \"\\n\t\t\t  \", HTML.DIV({                                                                  // 272\n      \"class\": \"text-left\"                                                                                            // 273\n    }, \"\\n\t\t\t\t\", HTML.P(HTML.A({                                                                                      // 274\n      href: function() {                                                                                              // 275\n        return [ \"/site/\", Spacebars.mustache(view.lookup(\"_id\")) ];                                                  // 276\n      }                                                                                                               // 277\n    }, Blaze.View(\"lookup:title\", function() {                                                                        // 278\n      return Spacebars.mustache(view.lookup(\"title\"));                                                                // 279\n    })), \" \", HTML.A({                                                                                                // 280\n      href: function() {                                                                                              // 281\n        return Spacebars.mustache(view.lookup(\"url\"));                                                                // 282\n      }                                                                                                               // 283\n    }, HTML.CharRef({                                                                                                 // 284\n      html: \"&gt;\",                                                                                                   // 285\n      str: \">\"                                                                                                        // 286\n    }), HTML.CharRef({                                                                                                // 287\n      html: \"&gt;\",                                                                                                   // 288\n      str: \">\"                                                                                                        // 289\n    }))), \"\\n\t\t\t\t\", HTML.P(Blaze.View(\"lookup:description\", function() {                                              // 290\n      return Spacebars.mustache(view.lookup(\"description\"));                                                          // 291\n    })), \"\\n\t\t\t\t\", HTML.P({                                                                                           // 292\n      \"class\": \"tagline\"                                                                                              // 293\n    }, \"submitted \", Blaze.View(\"lookup:formatDate\", function() {                                                     // 294\n      return Spacebars.mustache(view.lookup(\"formatDate\"), view.lookup(\"createdOn\"));                                 // 295\n    }), \" by \", Blaze.If(function() {                                                                                 // 296\n      return Spacebars.call(view.lookup(\"createdBy\"));                                                                // 297\n    }, function() {                                                                                                   // 298\n      return Blaze.View(\"lookup:createdBy\", function() {                                                              // 299\n        return Spacebars.mustache(view.lookup(\"createdBy\"));                                                          // 300\n      });                                                                                                             // 301\n    }, function() {                                                                                                   // 302\n      return \"anonymous\";                                                                                             // 303\n    })), \"\\n\t\t\t  \"), \"\\n\t\t\t\"), \"\\n\t\t  \" ];                                                                            // 304\n  }), \"\\n\t\t  \");                                                                                                      // 305\n}));                                                                                                                  // 306\n                                                                                                                      // 307\nTemplate.__checkName(\"website_item\");                                                                                 // 308\nTemplate[\"website_item\"] = new Template(\"Template.website_item\", (function() {                                        // 309\n  var view = this;                                                                                                    // 310\n  return \"\";                                                                                                          // 311\n}));                                                                                                                  // 312\n                                                                                                                      // 313\nTemplate.__checkName(\"website_detail\");                                                                               // 314\nTemplate[\"website_detail\"] = new Template(\"Template.website_detail\", (function() {                                    // 315\n  var view = this;                                                                                                    // 316\n  return [ HTML.H2(HTML.A({                                                                                           // 317\n    href: function() {                                                                                                // 318\n      return Spacebars.mustache(view.lookup(\"url\"));                                                                  // 319\n    }                                                                                                                 // 320\n  }, Blaze.View(\"lookup:title\", function() {                                                                          // 321\n    return Spacebars.mustache(view.lookup(\"title\"));                                                                  // 322\n  }))), \"\\n\t\t  \", HTML.DIV({                                                                                          // 323\n    \"class\": \"site-detail\"                                                                                            // 324\n  }, \"\\n\t\t\t\", HTML.P({                                                                                                // 325\n    \"class\": \"tagline\"                                                                                                // 326\n  }, \"submitted \", Blaze.View(\"lookup:formatDate\", function() {                                                       // 327\n    return Spacebars.mustache(view.lookup(\"formatDate\"), view.lookup(\"createdOn\"));                                   // 328\n  }), \" by \", Blaze.If(function() {                                                                                   // 329\n    return Spacebars.call(view.lookup(\"createdBy\"));                                                                  // 330\n  }, function() {                                                                                                     // 331\n    return Blaze.View(\"lookup:createdBy\", function() {                                                                // 332\n      return Spacebars.mustache(view.lookup(\"createdBy\"));                                                            // 333\n    });                                                                                                               // 334\n  }, function() {                                                                                                     // 335\n    return \"anonymous\";                                                                                               // 336\n  })), \"\\n\t\t\t\", HTML.P(Blaze.View(\"lookup:description\", function() {                                                  // 337\n    return Spacebars.mustache(view.lookup(\"description\"));                                                            // 338\n  })), \"\\n\t\t  \"), \"\\n\t\t  \", HTML.DIV({                                                                                // 339\n    id: \"comment-form\",                                                                                               // 340\n    \"class\": \"card\"                                                                                                   // 341\n  }, \"\\n\t\t\t\", HTML.Raw(\"<h3>Add your comment</h3>\"), \"\\n\t\t\t\", HTML.FORM({                                             // 342\n    \"class\": \"js-save-comment-form\"                                                                                   // 343\n  }, \"\\n\t\t\t  \", HTML.DIV({                                                                                            // 344\n    \"class\": \"form-group\"                                                                                             // 345\n  }, \"\\n\t\t\t\t\", HTML.TEXTAREA({                                                                                        // 346\n    id: \"comment\",                                                                                                    // 347\n    \"class\": \"form-control\",                                                                                          // 348\n    placeholder: \"Add your comment.\"                                                                                  // 349\n  }), \"\\n\t\t\t  \"), \"\\n\t\t\t  \", HTML.Raw('<button type=\"submit\" class=\"btn btn-default\">Submit</button>'), \"\\n\t\t\t\"), \"\\n\t\t  \") ];\n}));                                                                                                                  // 351\n                                                                                                                      // 352\nTemplate.__checkName(\"website_comments\");                                                                             // 353\nTemplate[\"website_comments\"] = new Template(\"Template.website_comments\", (function() {                                // 354\n  var view = this;                                                                                                    // 355\n  return HTML.DIV({                                                                                                   // 356\n    \"class\": \"comments card\"                                                                                          // 357\n  }, HTML.Raw(\"\\n\t\t\t<h3>Comments:</h3>\\n\t\t\t\"), Blaze.Each(function() {                                                // 358\n    return Spacebars.call(view.lookup(\"comments\"));                                                                   // 359\n  }, function() {                                                                                                     // 360\n    return [ \"\\n\t\t\t\", HTML.DIV({                                                                                      // 361\n      \"class\": \"comment\"                                                                                              // 362\n    }, \"\\n\t\t\t  \", HTML.P({                                                                                            // 363\n      \"class\": \"tagline\"                                                                                              // 364\n    }, \"submitted \", Blaze.View(\"lookup:formatDate\", function() {                                                     // 365\n      return Spacebars.mustache(view.lookup(\"formatDate\"), view.lookup(\"createdOn\"));                                 // 366\n    }), \" by \", Blaze.If(function() {                                                                                 // 367\n      return Spacebars.call(view.lookup(\"createdBy\"));                                                                // 368\n    }, function() {                                                                                                   // 369\n      return Blaze.View(\"lookup:createdBy\", function() {                                                              // 370\n        return Spacebars.mustache(view.lookup(\"createdBy\"));                                                          // 371\n      });                                                                                                             // 372\n    }, function() {                                                                                                   // 373\n      return \"anonymous\";                                                                                             // 374\n    })), \"\\n\t\t\t  \", HTML.P(Blaze.View(\"lookup:comment\", function() {                                                  // 375\n      return Spacebars.mustache(view.lookup(\"comment\"));                                                              // 376\n    })), \"\\n\t\t\t\"), \"\\n\t\t\t\" ];                                                                                         // 377\n  }), \"\\n\t\t  \");                                                                                                      // 378\n}));                                                                                                                  // 379\n                                                                                                                      // 380\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"main.js\":function(){\n\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                    //\n// client/main.js                                                                                                     //\n//                                                                                                                    //\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                      //\n/// routing                                                                                                           //\nRouter.configure({                                                                                                    // 2\n    layoutTemplate: 'ApplicationLayout'                                                                               // 3\n});                                                                                                                   // 2\n                                                                                                                      //\nRouter.route('/', function () {                                                                                       // 6\n    this.render('navbar', { to: 'navbar' });                                                                          // 7\n    this.render('website_form', { to: 'website_form' });                                                              // 8\n    this.render('website_list', { to: 'main', data: { websites: Websites.find({}, { sort: { rating: -1 } }) } });     // 9\n});                                                                                                                   // 10\n                                                                                                                      //\nRouter.route('/site/:_id', function () {                                                                              // 12\n    this.render('navbar', { to: 'navbar' });                                                                          // 13\n    this.render('website_detail', { to: 'main', data: Websites.findOne({ _id: this.params._id }) });                  // 14\n    this.render('website_comments', { to: 'comments', data: { comments: Comments.find({ website_id: this.params._id }) } });\n});                                                                                                                   // 16\n                                                                                                                      //\nRouter.route('/search/:_query', function () {                                                                         // 18\n    var query = this.params._query.toLowerCase();                                                                     // 19\n    var search_result = [];                                                                                           // 20\n    var websites = Websites.find().fetch();                                                                           // 21\n    for (var i in meteorBabelHelpers.sanitizeForInObject(websites)) {                                                 // 22\n        if (websites[i].title.toLowerCase().search(query) >= 0 || websites[i].description.toLowerCase().search(query) >= 0) {\n            search_result.push(websites[i]);                                                                          // 24\n        }                                                                                                             // 25\n    }                                                                                                                 // 26\n    console.log(search_result);                                                                                       // 27\n    this.render('navbar', { to: 'navbar' });                                                                          // 28\n    this.render('website_list', { to: 'main', data: { websites: search_result } });                                   // 29\n});                                                                                                                   // 30\n                                                                                                                      //\nTemplate.registerHelper('formatDate', function (date) {                                                               // 32\n    return date.toLocaleDateString();                                                                                 // 33\n});                                                                                                                   // 34\n                                                                                                                      //\n/// acounts config                                                                                                    //\nAccounts.ui.config({                                                                                                  // 37\n    passwordSignupFields: \"EMAIL\"                                                                                     // 38\n});                                                                                                                   // 37\n                                                                                                                      //\nTemplate.website_list.events({                                                                                        // 41\n    \"click .js-upvote\": function () {                                                                                 // 42\n        function clickJsUpvote(event) {                                                                               // 42\n            var website_id = this._id;                                                                                // 43\n            console.log(\"Up voting website with id \" + website_id);                                                   // 44\n            old_rating = Websites.findOne({ _id: website_id }).rating;                                                // 45\n            if (old_rating == undefined) {                                                                            // 46\n                old_rating = 0;                                                                                       // 47\n            }                                                                                                         // 48\n            console.log(\"Site value is \" + old_rating);                                                               // 49\n            if (Meteor.user()) {                                                                                      // 50\n                Websites.update({ _id: website_id }, { $set: { rating: old_rating + 1 } });                           // 51\n            } else {                                                                                                  // 52\n                $('#modal-dialog').modal('show');                                                                     // 54\n            }                                                                                                         // 55\n                                                                                                                      //\n            return false;                                                                                             // 57\n        }                                                                                                             // 58\n                                                                                                                      //\n        return clickJsUpvote;                                                                                         // 42\n    }(),                                                                                                              // 42\n    \"click .js-downvote\": function () {                                                                               // 59\n        function clickJsDownvote(event) {                                                                             // 59\n            var website_id = this._id;                                                                                // 60\n            console.log(\"Down voting website with id \" + website_id);                                                 // 61\n                                                                                                                      //\n            old_rating = Websites.findOne({ _id: website_id }).rating;                                                // 63\n            if (old_rating == undefined) {                                                                            // 64\n                old_rating = 0;                                                                                       // 65\n            }                                                                                                         // 66\n            console.log(\"Site value is \" + old_rating);                                                               // 67\n            if (Meteor.user()) {                                                                                      // 68\n                Websites.update({ _id: website_id }, { $set: { rating: old_rating - 1 } });                           // 69\n            } else {                                                                                                  // 70\n                $('#modal-dialog').modal('show');                                                                     // 72\n            }                                                                                                         // 73\n                                                                                                                      //\n            return false;                                                                                             // 75\n        }                                                                                                             // 76\n                                                                                                                      //\n        return clickJsDownvote;                                                                                       // 59\n    }()                                                                                                               // 59\n});                                                                                                                   // 41\n                                                                                                                      //\nTemplate.website_form.events({                                                                                        // 79\n    \"click .js-toggle-website-form\": function () {                                                                    // 80\n        function clickJsToggleWebsiteForm(event) {                                                                    // 80\n            $(\"#website_form\").toggle('slow');                                                                        // 81\n        }                                                                                                             // 82\n                                                                                                                      //\n        return clickJsToggleWebsiteForm;                                                                              // 80\n    }(),                                                                                                              // 80\n    \"submit .js-save-website-form\": function () {                                                                     // 83\n        function submitJsSaveWebsiteForm(event) {                                                                     // 83\n            var url = event.target.url.value;                                                                         // 84\n            console.log(\"The url they entered is: \" + url);                                                           // 85\n                                                                                                                      //\n            if (Meteor.user()) {                                                                                      // 87\n                Websites.insert({                                                                                     // 88\n                    url: event.target.url.value,                                                                      // 89\n                    title: event.target.title.value,                                                                  // 90\n                    description: event.target.description.value,                                                      // 91\n                    createdBy: Meteor.user().username,                                                                // 92\n                    createdOn: new Date()                                                                             // 93\n                });                                                                                                   // 88\n            } else {                                                                                                  // 95\n                $('#modal-dialog').modal('show');                                                                     // 97\n            }                                                                                                         // 98\n                                                                                                                      //\n            $(\"#website_form\").toggle('slow');                                                                        // 100\n                                                                                                                      //\n            return false;                                                                                             // 102\n        }                                                                                                             // 103\n                                                                                                                      //\n        return submitJsSaveWebsiteForm;                                                                               // 83\n    }()                                                                                                               // 83\n});                                                                                                                   // 79\n                                                                                                                      //\nTemplate.website_detail.events({                                                                                      // 106\n    \"submit .js-save-comment-form\": function () {                                                                     // 107\n        function submitJsSaveCommentForm(event) {                                                                     // 107\n            var website_id = this._id;                                                                                // 108\n            if (Meteor.user()) {                                                                                      // 109\n                console.log(this._id);                                                                                // 110\n                Comments.insert({                                                                                     // 111\n                    website_id: website_id,                                                                           // 112\n                    comment: event.target.comment.value,                                                              // 113\n                    createdBy: Meteor.user().username,                                                                // 114\n                    createdOn: new Date()                                                                             // 115\n                });                                                                                                   // 111\n            } else {                                                                                                  // 117\n                $('#modal-dialog').modal('show');                                                                     // 119\n            }                                                                                                         // 120\n                                                                                                                      //\n            return false;                                                                                             // 122\n        }                                                                                                             // 123\n                                                                                                                      //\n        return submitJsSaveCommentForm;                                                                               // 107\n    }()                                                                                                               // 107\n                                                                                                                      //\n});                                                                                                                   // 106\n                                                                                                                      //\nTemplate.navbar.events({                                                                                              // 127\n    \"submit .js-search-form\": function () {                                                                           // 128\n        function submitJsSearchForm(event) {                                                                          // 128\n            console.log('/search/' + event.target.search.value);                                                      // 129\n            Router.go('/search/' + event.target.search.value);                                                        // 130\n            return false;                                                                                             // 131\n        }                                                                                                             // 132\n                                                                                                                      //\n        return submitJsSearchForm;                                                                                    // 128\n    }()                                                                                                               // 128\n});                                                                                                                   // 127\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"lib\":{\"collections.js\":function(){\n\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                    //\n// lib/collections.js                                                                                                 //\n//                                                                                                                    //\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                      //\nWebsites = new Mongo.Collection(\"websites\");                                                                          // 1\n                                                                                                                      //\nComments = new Mongo.Collection(\"Comments\");                                                                          // 3\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}}},{\"extensions\":[\".js\",\".json\",\".html\",\".css\"]});\nrequire(\"./client/template.main.js\");\nrequire(\"./lib/collections.js\");\nrequire(\"./client/main.js\");","servePath":"/app.js","sourceMap":{"version":3,"sources":["/client/template.main.js","/client/main.js","/lib/collections.js"],"names":[],"mappings":";;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4H;;;;;;;;;;;;AC1XA,OAAO,SAAP,CAAiB;AACb,oBAAgB;AADH,CAAjB;;AAIA,OAAO,KAAP,CAAa,GAAb,EAAkB,YAAU;AACxB,SAAK,MAAL,CAAY,QAAZ,EAAsB,EAAC,IAAI,QAAL,EAAtB;AACA,SAAK,MAAL,CAAY,cAAZ,EAA4B,EAAC,IAAI,cAAL,EAA5B;AACA,SAAK,MAAL,CAAY,cAAZ,EAA4B,EAAC,IAAI,MAAL,EAAa,MAAM,EAAC,UAAU,SAAS,IAAT,CAAc,EAAd,EAAkB,EAAC,MAAM,EAAC,QAAQ,CAAC,CAAV,EAAP,EAAlB,CAAX,EAAnB,EAA5B;AACH,CAJD;;AAMA,OAAO,KAAP,CAAa,YAAb,EAA2B,YAAW;AAClC,SAAK,MAAL,CAAY,QAAZ,EAAsB,EAAC,IAAI,QAAL,EAAtB;AACA,SAAK,MAAL,CAAY,gBAAZ,EAA8B,EAAC,IAAI,MAAL,EAAa,MAAM,SAAS,OAAT,CAAiB,EAAC,KAAI,KAAK,MAAL,CAAY,GAAjB,EAAjB,CAAnB,EAA9B;AACA,SAAK,MAAL,CAAY,kBAAZ,EAAgC,EAAC,IAAI,UAAL,EAAiB,MAAM,EAAC,UAAU,SAAS,IAAT,CAAc,EAAC,YAAY,KAAK,MAAL,CAAY,GAAzB,EAAd,CAAX,EAAvB,EAAhC;AACH,CAJD;;AAMA,OAAO,KAAP,CAAa,iBAAb,EAAgC,YAAW;AACvC,QAAI,QAAQ,KAAK,MAAL,CAAY,MAAZ,CAAmB,WAAnB,EAAZ;AACA,QAAI,gBAAgB,EAApB;AACA,QAAI,WAAW,SAAS,IAAT,GAAgB,KAAhB,EAAf;AACA,SAAK,IAAI,CAAT,2CAAc,QAAd,GAAwB;AACpB,YAAG,SAAS,CAAT,EAAY,KAAZ,CAAkB,WAAlB,GAAgC,MAAhC,CAAuC,KAAvC,KAA+C,CAA/C,IAAoD,SAAS,CAAT,EAAY,WAAZ,CAAwB,WAAxB,GAAsC,MAAtC,CAA6C,KAA7C,KAAqD,CAA5G,EAA+G;AAC3G,0BAAc,IAAd,CAAmB,SAAS,CAAT,CAAnB;AACH;AACJ;AACD,YAAQ,GAAR,CAAY,aAAZ;AACA,SAAK,MAAL,CAAY,QAAZ,EAAsB,EAAC,IAAI,QAAL,EAAtB;AACA,SAAK,MAAL,CAAY,cAAZ,EAA4B,EAAC,IAAI,MAAL,EAAa,MAAM,EAAC,UAAU,aAAX,EAAnB,EAA5B;AACH,CAZD;;AAcA,SAAS,cAAT,CAAwB,YAAxB,EAAsC,UAAS,IAAT,EAAe;AACjD,WAAO,KAAK,kBAAL,EAAP;AACH,CAFD;;;AAKA,SAAS,EAAT,CAAY,MAAZ,CAAmB;AACf,0BAAsB;AADP,CAAnB;;AAIA,SAAS,YAAT,CAAsB,MAAtB,CAA6B;AACzB;AAAmB,+BAAS,KAAT,EAAgB;AAC/B,gBAAI,aAAa,KAAK,GAAtB;AACA,oBAAQ,GAAR,CAAY,+BAA6B,UAAzC;AACA,yBAAa,SAAS,OAAT,CAAiB,EAAC,KAAK,UAAN,EAAjB,EAAoC,MAAjD;AACA,gBAAG,cAAc,SAAjB,EAA4B;AACxB,6BAAa,CAAb;AACH;AACD,oBAAQ,GAAR,CAAY,mBAAmB,UAA/B;AACA,gBAAG,OAAO,IAAP,EAAH,EAAkB;AACd,yBAAS,MAAT,CAAgB,EAAC,KAAK,UAAN,EAAhB,EAAmC,EAAC,MAAM,EAAC,QAAQ,aAAa,CAAtB,EAAP,EAAnC;AACH,aAFD,MAGK;AACD,kBAAE,eAAF,EAAmB,KAAnB,CAAyB,MAAzB;AACH;;AAED,mBAAO,KAAP;AACH;;AAhBD;AAAA,OADyB;AAkBzB;AAAqB,iCAAS,KAAT,EAAgB;AACjC,gBAAI,aAAa,KAAK,GAAtB;AACA,oBAAQ,GAAR,CAAY,iCAA+B,UAA3C;;AAEA,yBAAa,SAAS,OAAT,CAAiB,EAAC,KAAK,UAAN,EAAjB,EAAoC,MAAjD;AACA,gBAAG,cAAc,SAAjB,EAA4B;AACxB,6BAAa,CAAb;AACH;AACD,oBAAQ,GAAR,CAAY,mBAAmB,UAA/B;AACA,gBAAG,OAAO,IAAP,EAAH,EAAkB;AACd,yBAAS,MAAT,CAAgB,EAAC,KAAK,UAAN,EAAhB,EAAmC,EAAC,MAAM,EAAC,QAAQ,aAAa,CAAtB,EAAP,EAAnC;AACH,aAFD,MAGK;AACD,kBAAE,eAAF,EAAmB,KAAnB,CAAyB,MAAzB;AACH;;AAED,mBAAO,KAAP;AACH;;AAjBD;AAAA;AAlByB,CAA7B;;AAsCA,SAAS,YAAT,CAAsB,MAAtB,CAA6B;AACzB;AAAgC,0CAAS,KAAT,EAAe;AAC3C,cAAE,eAAF,EAAmB,MAAnB,CAA0B,MAA1B;AACH;;AAFD;AAAA,OADyB;AAIzB;AAA+B,yCAAS,KAAT,EAAe;AAC1C,gBAAI,MAAM,MAAM,MAAN,CAAa,GAAb,CAAiB,KAA3B;AACA,oBAAQ,GAAR,CAAY,8BAA4B,GAAxC;;AAEA,gBAAG,OAAO,IAAP,EAAH,EAAkB;AACd,yBAAS,MAAT,CAAgB;AACZ,yBAAK,MAAM,MAAN,CAAa,GAAb,CAAiB,KADV;AAEZ,2BAAO,MAAM,MAAN,CAAa,KAAb,CAAmB,KAFd;AAGZ,iCAAa,MAAM,MAAN,CAAa,WAAb,CAAyB,KAH1B;AAIZ,+BAAW,OAAO,IAAP,GAAc,QAJb;AAKZ,+BAAW,IAAI,IAAJ;AALC,iBAAhB;AAOH,aARD,MASK;AACD,kBAAE,eAAF,EAAmB,KAAnB,CAAyB,MAAzB;AACH;;AAED,cAAE,eAAF,EAAmB,MAAnB,CAA0B,MAA1B;;AAEA,mBAAO,KAAP;AACH;;AApBD;AAAA;AAJyB,CAA7B;;AA2BA,SAAS,cAAT,CAAwB,MAAxB,CAA+B;AAC3B;AAAgC,yCAAS,KAAT,EAAgB;AAC5C,gBAAI,aAAa,KAAK,GAAtB;AACA,gBAAG,OAAO,IAAP,EAAH,EAAkB;AACd,wBAAQ,GAAR,CAAY,KAAK,GAAjB;AACA,yBAAS,MAAT,CAAgB;AACZ,gCAAY,UADA;AAEZ,6BAAS,MAAM,MAAN,CAAa,OAAb,CAAqB,KAFlB;AAGZ,+BAAW,OAAO,IAAP,GAAc,QAHb;AAIZ,+BAAW,IAAI,IAAJ;AAJC,iBAAhB;AAMH,aARD,MASK;AACD,kBAAE,eAAF,EAAmB,KAAnB,CAAyB,MAAzB;AACH;;AAED,mBAAO,KAAP;AACH;;AAhBD;AAAA;;AAD2B,CAA/B;;AAqBA,SAAS,MAAT,CAAgB,MAAhB,CAAuB;AACnB;AAA0B,oCAAS,KAAT,EAAgB;AACtC,oBAAQ,GAAR,CAAY,aAAa,MAAM,MAAN,CAAa,MAAb,CAAoB,KAA7C;AACA,mBAAO,EAAP,CAAU,aAAa,MAAM,MAAN,CAAa,MAAb,CAAoB,KAA3C;AACA,mBAAO,KAAP;AACH;;AAJD;AAAA;AADmB,CAAvB,2H;;;;;;;;;;;AC9HA,WAAW,IAAI,MAAM,UAAV,CAAqB,UAArB,CAAX;;AAEA,WAAW,IAAI,MAAM,UAAV,CAAqB,UAArB,CAAX,+E","file":"/app.js","sourcesContent":["\nTemplate.body.addContent((function() {\n  var view = this;\n  return HTML.Raw(\"<!-- navbar  - you will be putting the login functions here -->\");\n}));\nMeteor.startup(Template.body.renderToDocument);\n\nTemplate.__checkName(\"ApplicationLayout\");\nTemplate[\"ApplicationLayout\"] = new Template(\"Template.ApplicationLayout\", (function() {\n  var view = this;\n  return [ Blaze._TemplateWith(function() {\n    return \"navbar\";\n  }, function() {\n    return Spacebars.include(view.lookupTemplate(\"yield\"));\n  }), \"\\n\t\t  \", HTML.DIV({\n    \"class\": \"container\"\n  }, \"\\n\t\t\t\", Blaze._TemplateWith(function() {\n    return \"website_form\";\n  }, function() {\n    return Spacebars.include(view.lookupTemplate(\"yield\"));\n  }), \"\\n\t\t\t\", Blaze._TemplateWith(function() {\n    return \"main\";\n  }, function() {\n    return Spacebars.include(view.lookupTemplate(\"yield\"));\n  }), \"\\n\t\t\t\", Blaze._TemplateWith(function() {\n    return \"comments\";\n  }, function() {\n    return Spacebars.include(view.lookupTemplate(\"yield\"));\n  }), \"\\n\t\t\t\", Spacebars.include(view.lookupTemplate(\"modal\")), \"\\n\t\t  \") ];\n}));\n\nTemplate.__checkName(\"modal\");\nTemplate[\"modal\"] = new Template(\"Template.modal\", (function() {\n  var view = this;\n  return HTML.Raw('<div class=\"modal fade\" id=\"modal-dialog\" role=\"dialog\">\\n\t\t\t<div class=\"modal-dialog\">\\n\t\t\t  <div class=\"modal-content\">\\n\t\t\t\t<div class=\"modal-header\">\\n\t\t\t\t  <button type=\"button\" class=\"close\" data-dismiss=\"modal\">&times;</button>\\n\t\t\t\t</div>\\n\t\t\t\t<div class=\"modal-body\" id=\"dialog-body\">\\n\t\t\t\t  You must be login first.\\n\t\t\t\t</div>\\n\t\t\t  </div>\\n\t\t\t</div>\\n\t\t  </div>');\n}));\n\nTemplate.__checkName(\"navbar\");\nTemplate[\"navbar\"] = new Template(\"Template.navbar\", (function() {\n  var view = this;\n  return HTML.Raw('<nav class=\"navbar navbar-default\">\\n\t\t  <a class=\"navbar-brand\" href=\"/\">Social Website Aggregator</a>\\n\t\t  \\n\t\t\t<div class=\"container-fluid\">\\n\t\t\t\\n\t\t\t  <div class=\"navbar-header\">\\n\t\t\t\t\\n\t\t\t  </div>\\n\t\t\t  <form class=\"navbar-form navbar-right js-search-form\">\\n\t\t\t\t<input type=\"text\" id=\"search\">\\n\t\t\t\t<button type=\"submit\">Search</button>\\n\t\t\t  </form>\\n\t\t\t</div>\\n\t\t  </nav>');\n}));\n\nTemplate.__checkName(\"_loginButtonsLoggedInDropdown\");\nTemplate[\"_loginButtonsLoggedInDropdown\"] = new Template(\"Template._loginButtonsLoggedInDropdown\", (function() {\n  var view = this;\n  return HTML.LI({\n    id: \"login-dropdown-list\",\n    \"class\": \"dropdown\"\n  }, \"\\n    \", HTML.A({\n    \"class\": \"dropdown-toggle\",\n    href: \"#\",\n    \"data-toggle\": \"dropdown\"\n  }, \"\\n      \", Blaze.View(\"lookup:displayName\", function() {\n    return Spacebars.mustache(view.lookup(\"displayName\"));\n  }), \"\\n      \", HTML.Raw('<b class=\"caret\"></b>'), \"\\n    \"), \"\\n    \", HTML.DIV({\n    \"class\": \"dropdown-menu col-sm-3\"\n  }, \"\\n      \", Blaze.If(function() {\n    return Spacebars.call(view.lookup(\"inMessageOnlyFlow\"));\n  }, function() {\n    return [ \"\\n        \", Spacebars.include(view.lookupTemplate(\"_loginButtonsMessages\")), \"\\n      \" ];\n  }, function() {\n    return [ \"\\n        \", Blaze.If(function() {\n      return Spacebars.call(view.lookup(\"inChangePasswordFlow\"));\n    }, function() {\n      return [ \"\\n          \", Spacebars.include(view.lookupTemplate(\"_loginButtonsChangePassword\")), \"\\n        \" ];\n    }, function() {\n      return [ \"\\n          \", Spacebars.include(view.lookupTemplate(\"_loginButtonsLoggedInDropdownActions\")), \"\\n        \" ];\n    }), \"\\n      \" ];\n  }), \"\\n    \"), \"\\n  \");\n}));\n\nTemplate.__checkName(\"_loginButtonsLoggedInDropdownActions\");\nTemplate[\"_loginButtonsLoggedInDropdownActions\"] = new Template(\"Template._loginButtonsLoggedInDropdownActions\", (function() {\n  var view = this;\n  return [ Blaze.If(function() {\n    return Spacebars.call(view.lookup(\"allowChangingPassword\"));\n  }, function() {\n    return [ \"\\n    \", HTML.BUTTON({\n      \"class\": \"btn btn-default btn-block\",\n      id: \"login-buttons-open-change-password\"\n    }, \"Change password\"), \"\\n  \" ];\n  }), HTML.Raw('\\n  <button class=\"btn btn-block btn-primary\" id=\"login-buttons-logout\">Sign out</button>') ];\n}));\n\nTemplate.__checkName(\"_loginButtonsLoggedOutDropdown\");\nTemplate[\"_loginButtonsLoggedOutDropdown\"] = new Template(\"Template._loginButtonsLoggedOutDropdown\", (function() {\n  var view = this;\n  return HTML.LI({\n    id: \"login-dropdown-list\",\n    \"class\": \"dropdown\"\n  }, \"\\n    \", HTML.A({\n    \"class\": \"dropdown-toggle\",\n    href: \"#\",\n    \"data-toggle\": \"dropdown\"\n  }, \"\\n      Sign In\", Blaze.Unless(function() {\n    return Spacebars.call(view.lookup(\"forbidClientAccountCreation\"));\n  }, function() {\n    return \" / Up\";\n  }), \"\\n      \", HTML.Raw('<b class=\"caret\"></b>'), \"\\n    \"), \"\\n    \", HTML.DIV({\n    \"class\": \"dropdown-menu\"\n  }, \"\\n      \", Spacebars.include(view.lookupTemplate(\"_loginButtonsLoggedOutAllServices\")), \"\\n    \"), \"\\n  \");\n}));\n\nTemplate.__checkName(\"_loginButtonsLoggedOutAllServices\");\nTemplate[\"_loginButtonsLoggedOutAllServices\"] = new Template(\"Template._loginButtonsLoggedOutAllServices\", (function() {\n  var view = this;\n  return Blaze.Each(function() {\n    return Spacebars.call(view.lookup(\"services\"));\n  }, function() {\n    return [ \"\\n  \", Blaze.Unless(function() {\n      return Spacebars.call(view.lookup(\"hasPasswordService\"));\n    }, function() {\n      return [ \"\\n    \", Spacebars.include(view.lookupTemplate(\"_loginButtonsMessages\")), \"\\n  \" ];\n    }), \"\\n    \", Blaze.If(function() {\n      return Spacebars.call(view.lookup(\"isPasswordService\"));\n    }, function() {\n      return [ \"\\n      \", Blaze.If(function() {\n        return Spacebars.call(view.lookup(\"hasOtherServices\"));\n      }, function() {\n        return [ \" \\n        \", Spacebars.include(view.lookupTemplate(\"_loginButtonsLoggedOutPasswordServiceSeparator\")), \"\\n      \" ];\n      }), \"\\n      \", Spacebars.include(view.lookupTemplate(\"_loginButtonsLoggedOutPasswordService\")), \"\\n    \" ];\n    }, function() {\n      return [ \"\\n      \", Spacebars.include(view.lookupTemplate(\"_loginButtonsLoggedOutSingleLoginButton\")), \"\\n    \" ];\n    }), \"\\n  \" ];\n  });\n}));\n\nTemplate.__checkName(\"_loginButtonsLoggedOutPasswordServiceSeparator\");\nTemplate[\"_loginButtonsLoggedOutPasswordServiceSeparator\"] = new Template(\"Template._loginButtonsLoggedOutPasswordServiceSeparator\", (function() {\n  var view = this;\n  return HTML.Raw('<div class=\"or\">\\n    <span class=\"hline\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>\\n    <span class=\"or-text\">or</span>\\n    <span class=\"hline\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>\\n  </div>');\n}));\n\nTemplate.__checkName(\"_loginButtonsLoggedOutPasswordService\");\nTemplate[\"_loginButtonsLoggedOutPasswordService\"] = new Template(\"Template._loginButtonsLoggedOutPasswordService\", (function() {\n  var view = this;\n  return Blaze.If(function() {\n    return Spacebars.call(view.lookup(\"inForgotPasswordFlow\"));\n  }, function() {\n    return [ \"\\n    \", Spacebars.include(view.lookupTemplate(\"_forgotPasswordForm\")), \"\\n  \" ];\n  }, function() {\n    return [ \"\\n    \", Spacebars.include(view.lookupTemplate(\"_loginButtonsMessages\")), \"\\n    \", Blaze.Each(function() {\n      return Spacebars.call(view.lookup(\"fields\"));\n    }, function() {\n      return [ \"\\n      \", Spacebars.include(view.lookupTemplate(\"_loginButtonsFormField\")), \"\\n    \" ];\n    }), \"\\n    \", HTML.BUTTON({\n      \"class\": \"btn btn-primary col-sm-12\",\n      id: \"login-buttons-password\",\n      type: \"button\"\n    }, \"\\n      \", Blaze.If(function() {\n      return Spacebars.call(view.lookup(\"inSignupFlow\"));\n    }, function() {\n      return \"\\n        Create\\n      \";\n    }, function() {\n      return \"\\n        Sign in\\n      \";\n    }), \"\\n    \"), \"\\n    \", Blaze.If(function() {\n      return Spacebars.call(view.lookup(\"inLoginFlow\"));\n    }, function() {\n      return [ \"\\n      \", HTML.DIV({\n        id: \"login-other-options\"\n      }, \"\\n      \", Blaze.If(function() {\n        return Spacebars.call(view.lookup(\"showForgotPasswordLink\"));\n      }, function() {\n        return [ \"\\n        \", HTML.A({\n          id: \"forgot-password-link\",\n          \"class\": \"pull-left\",\n          href: \"#\"\n        }, \"Forgot password?\"), \"\\n      \" ];\n      }), \"\\n      \", Blaze.If(function() {\n        return Spacebars.call(view.lookup(\"showCreateAccountLink\"));\n      }, function() {\n        return [ \"\\n        \", HTML.A({\n          id: \"signup-link\",\n          \"class\": \"pull-right\",\n          href: \"#\"\n        }, \"Create account\"), \"\\n      \" ];\n      }), \"\\n      \"), \"\\n    \" ];\n    }), \"\\n    \", Blaze.If(function() {\n      return Spacebars.call(view.lookup(\"inSignupFlow\"));\n    }, function() {\n      return [ \"\\n      \", Spacebars.include(view.lookupTemplate(\"_loginButtonsBackToLoginLink\")), \"\\n    \" ];\n    }), \"\\n  \" ];\n  });\n}));\n\nTemplate.__checkName(\"_forgotPasswordForm\");\nTemplate[\"_forgotPasswordForm\"] = new Template(\"Template._forgotPasswordForm\", (function() {\n  var view = this;\n  return HTML.DIV({\n    \"class\": \"login-form\"\n  }, \"\\n    \", Spacebars.include(view.lookupTemplate(\"_loginButtonsMessages\")), HTML.Raw('\\n    <div id=\"forgot-password-email-label-and-input\"> \\n      <input id=\"forgot-password-email\" type=\"email\" placeholder=\"E-mail\" class=\"form-control\">\\n    </div>\\n    <button class=\"btn btn-primary login-button-form-submit col-sm-12\" id=\"login-buttons-forgot-password\">Reset password</button>\\n    '), Spacebars.include(view.lookupTemplate(\"_loginButtonsBackToLoginLink\")), \"\\n  \");\n}));\n\nTemplate.__checkName(\"_loginButtonsBackToLoginLink\");\nTemplate[\"_loginButtonsBackToLoginLink\"] = new Template(\"Template._loginButtonsBackToLoginLink\", (function() {\n  var view = this;\n  return HTML.Raw('<button id=\"back-to-login-link\" class=\"btn btn-default col-sm-12\">Cancel</button>');\n}));\n\nTemplate.__checkName(\"_loginButtonsFormField\");\nTemplate[\"_loginButtonsFormField\"] = new Template(\"Template._loginButtonsFormField\", (function() {\n  var view = this;\n  return Blaze.If(function() {\n    return Spacebars.call(view.lookup(\"visible\"));\n  }, function() {\n    return [ \"\\n    \", HTML.INPUT({\n      id: function() {\n        return [ \"login-\", Spacebars.mustache(view.lookup(\"fieldName\")) ];\n      },\n      type: function() {\n        return Spacebars.mustache(view.lookup(\"inputType\"));\n      },\n      placeholder: function() {\n        return Spacebars.mustache(view.lookup(\"fieldLabel\"));\n      },\n      \"class\": \"form-control\"\n    }), \"\\n  \" ];\n  });\n}));\n\nTemplate.__checkName(\"_loginButtonsChangePassword\");\nTemplate[\"_loginButtonsChangePassword\"] = new Template(\"Template._loginButtonsChangePassword\", (function() {\n  var view = this;\n  return [ Spacebars.include(view.lookupTemplate(\"_loginButtonsMessages\")), \"\\n  \", Blaze.Each(function() {\n    return Spacebars.call(view.lookup(\"fields\"));\n  }, function() {\n    return [ \"\\n    \", Spacebars.include(view.lookupTemplate(\"_loginButtonsFormField\")), \"\\n  \" ];\n  }), HTML.Raw('\\n  <button class=\"btn btn-primary\" id=\"login-buttons-do-change-password\">Change password</button>\\n  <button class=\"btn btn-default login-close\">Close</button>') ];\n}));\n\nTemplate.__checkName(\"website_form\");\nTemplate[\"website_form\"] = new Template(\"Template.website_form\", (function() {\n  var view = this;\n  return HTML.Raw('<a class=\"btn btn-default js-toggle-website-form\" href=\"#\">\\n\t\t\t  <span><strong>Add new</strong></span>\\n\t\t  </a>\\n\t\t  <div id=\"website_form\" class=\"hidden_div\">\\n\t\t\t<form class=\"js-save-website-form\">\\n\t\t\t  <div class=\"form-group\">\\n\t\t\t\t<label for=\"url\">Site address</label>\\n\t\t\t\t<input type=\"text\" class=\"form-control\" id=\"url\" placeholder=\"http://www.mysite.com\">\\n\t\t\t  </div>\\n\t\t\t  <div class=\"form-group\">\\n\t\t\t\t<label for=\"title\">Title</label>\\n\t\t\t\t<input type=\"text\" class=\"form-control\" id=\"title\" placeholder=\"Mysite\">\\n\t\t\t  </div>\\n\t\t\t  <div class=\"form-group\">\\n\t\t\t\t<label for=\"description\">Description</label>\\n\t\t\t\t<input type=\"text\" class=\"form-control\" id=\"description\" placeholder=\"I found this site really useful for ...\">\\n\t\t\t  </div>\\n\\n\t\t\t  <button type=\"submit\" class=\"btn btn-default\">Submit</button>\\n\t\t\t</form>\\n\t\t  </div>');\n}));\n\nTemplate.__checkName(\"website_list\");\nTemplate[\"website_list\"] = new Template(\"Template.website_list\", (function() {\n  var view = this;\n  return HTML.DIV(\"\\n\t\t  \", Blaze.Each(function() {\n    return Spacebars.call(view.lookup(\"websites\"));\n  }, function() {\n    return [ \"\\n\t\t\t\", HTML.DIV({\n      \"class\": \"card\"\n    }, \"\\n\t\t\t  \", HTML.SPAN({\n      \"class\": \"rank\"\n    }, Blaze.View(\"lookup:@index\", function() {\n      return Spacebars.mustache(view.lookup(\"@index\"));\n    })), \"\\n\t\t\t  \", HTML.DIV({\n      \"class\": \"column-middle\"\n    }, \"\\n\t\t\t\t\", HTML.A({\n      href: \"#\",\n      \"class\": \"btn btn-success js-upvote\"\n    }, \"\\n\t\t\t\t  \", HTML.SPAN({\n      \"class\": \"glyphicon glyphicon-hand-up\",\n      \"aria-hidden\": \"true\"\n    }), \"\\n\t\t\t\t\"), \"\\n\t\t\t\t\", HTML.SPAN(Blaze.If(function() {\n      return Spacebars.call(view.lookup(\"rating\"));\n    }, function() {\n      return Blaze.View(\"lookup:rating\", function() {\n        return Spacebars.mustache(view.lookup(\"rating\"));\n      });\n    }, function() {\n      return \"0\";\n    })), \"\\n\t\t\t\t\", HTML.A({\n      href: \"#\",\n      \"class\": \"btn btn-danger js-downvote\"\n    }, \"\\n\t\t\t\t  \", HTML.SPAN({\n      \"class\": \"glyphicon glyphicon-hand-down\",\n      \"aria-hidden\": \"true\"\n    }), \"\\n\t\t\t\t\"), \"\\n\t\t\t  \"), \"\\n\t\t\t  \", HTML.DIV({\n      \"class\": \"text-left\"\n    }, \"\\n\t\t\t\t\", HTML.P(HTML.A({\n      href: function() {\n        return [ \"/site/\", Spacebars.mustache(view.lookup(\"_id\")) ];\n      }\n    }, Blaze.View(\"lookup:title\", function() {\n      return Spacebars.mustache(view.lookup(\"title\"));\n    })), \" \", HTML.A({\n      href: function() {\n        return Spacebars.mustache(view.lookup(\"url\"));\n      }\n    }, HTML.CharRef({\n      html: \"&gt;\",\n      str: \">\"\n    }), HTML.CharRef({\n      html: \"&gt;\",\n      str: \">\"\n    }))), \"\\n\t\t\t\t\", HTML.P(Blaze.View(\"lookup:description\", function() {\n      return Spacebars.mustache(view.lookup(\"description\"));\n    })), \"\\n\t\t\t\t\", HTML.P({\n      \"class\": \"tagline\"\n    }, \"submitted \", Blaze.View(\"lookup:formatDate\", function() {\n      return Spacebars.mustache(view.lookup(\"formatDate\"), view.lookup(\"createdOn\"));\n    }), \" by \", Blaze.If(function() {\n      return Spacebars.call(view.lookup(\"createdBy\"));\n    }, function() {\n      return Blaze.View(\"lookup:createdBy\", function() {\n        return Spacebars.mustache(view.lookup(\"createdBy\"));\n      });\n    }, function() {\n      return \"anonymous\";\n    })), \"\\n\t\t\t  \"), \"\\n\t\t\t\"), \"\\n\t\t  \" ];\n  }), \"\\n\t\t  \");\n}));\n\nTemplate.__checkName(\"website_item\");\nTemplate[\"website_item\"] = new Template(\"Template.website_item\", (function() {\n  var view = this;\n  return \"\";\n}));\n\nTemplate.__checkName(\"website_detail\");\nTemplate[\"website_detail\"] = new Template(\"Template.website_detail\", (function() {\n  var view = this;\n  return [ HTML.H2(HTML.A({\n    href: function() {\n      return Spacebars.mustache(view.lookup(\"url\"));\n    }\n  }, Blaze.View(\"lookup:title\", function() {\n    return Spacebars.mustache(view.lookup(\"title\"));\n  }))), \"\\n\t\t  \", HTML.DIV({\n    \"class\": \"site-detail\"\n  }, \"\\n\t\t\t\", HTML.P({\n    \"class\": \"tagline\"\n  }, \"submitted \", Blaze.View(\"lookup:formatDate\", function() {\n    return Spacebars.mustache(view.lookup(\"formatDate\"), view.lookup(\"createdOn\"));\n  }), \" by \", Blaze.If(function() {\n    return Spacebars.call(view.lookup(\"createdBy\"));\n  }, function() {\n    return Blaze.View(\"lookup:createdBy\", function() {\n      return Spacebars.mustache(view.lookup(\"createdBy\"));\n    });\n  }, function() {\n    return \"anonymous\";\n  })), \"\\n\t\t\t\", HTML.P(Blaze.View(\"lookup:description\", function() {\n    return Spacebars.mustache(view.lookup(\"description\"));\n  })), \"\\n\t\t  \"), \"\\n\t\t  \", HTML.DIV({\n    id: \"comment-form\",\n    \"class\": \"card\"\n  }, \"\\n\t\t\t\", HTML.Raw(\"<h3>Add your comment</h3>\"), \"\\n\t\t\t\", HTML.FORM({\n    \"class\": \"js-save-comment-form\"\n  }, \"\\n\t\t\t  \", HTML.DIV({\n    \"class\": \"form-group\"\n  }, \"\\n\t\t\t\t\", HTML.TEXTAREA({\n    id: \"comment\",\n    \"class\": \"form-control\",\n    placeholder: \"Add your comment.\"\n  }), \"\\n\t\t\t  \"), \"\\n\t\t\t  \", HTML.Raw('<button type=\"submit\" class=\"btn btn-default\">Submit</button>'), \"\\n\t\t\t\"), \"\\n\t\t  \") ];\n}));\n\nTemplate.__checkName(\"website_comments\");\nTemplate[\"website_comments\"] = new Template(\"Template.website_comments\", (function() {\n  var view = this;\n  return HTML.DIV({\n    \"class\": \"comments card\"\n  }, HTML.Raw(\"\\n\t\t\t<h3>Comments:</h3>\\n\t\t\t\"), Blaze.Each(function() {\n    return Spacebars.call(view.lookup(\"comments\"));\n  }, function() {\n    return [ \"\\n\t\t\t\", HTML.DIV({\n      \"class\": \"comment\"\n    }, \"\\n\t\t\t  \", HTML.P({\n      \"class\": \"tagline\"\n    }, \"submitted \", Blaze.View(\"lookup:formatDate\", function() {\n      return Spacebars.mustache(view.lookup(\"formatDate\"), view.lookup(\"createdOn\"));\n    }), \" by \", Blaze.If(function() {\n      return Spacebars.call(view.lookup(\"createdBy\"));\n    }, function() {\n      return Blaze.View(\"lookup:createdBy\", function() {\n        return Spacebars.mustache(view.lookup(\"createdBy\"));\n      });\n    }, function() {\n      return \"anonymous\";\n    })), \"\\n\t\t\t  \", HTML.P(Blaze.View(\"lookup:comment\", function() {\n      return Spacebars.mustache(view.lookup(\"comment\"));\n    })), \"\\n\t\t\t\"), \"\\n\t\t\t\" ];\n  }), \"\\n\t\t  \");\n}));\n","/// routing\nRouter.configure({\n    layoutTemplate: 'ApplicationLayout'\n});\n\nRouter.route('/', function(){\n    this.render('navbar', {to: 'navbar'});\n    this.render('website_form', {to: 'website_form'});\n    this.render('website_list', {to: 'main', data: {websites: Websites.find({}, {sort: {rating: -1}})}});\n});\n\nRouter.route('/site/:_id', function() {\n    this.render('navbar', {to: 'navbar'});\n    this.render('website_detail', {to: 'main', data: Websites.findOne({_id:this.params._id})});\n    this.render('website_comments', {to: 'comments', data: {comments: Comments.find({website_id: this.params._id})}});\n});\n\nRouter.route('/search/:_query', function() {\n    var query = this.params._query.toLowerCase();\n    var search_result = [];\n    var websites = Websites.find().fetch()\n    for (var i in websites) {\n        if(websites[i].title.toLowerCase().search(query)>=0 || websites[i].description.toLowerCase().search(query)>=0) {\n            search_result.push(websites[i]);\n        }\n    }\n    console.log(search_result);\n    this.render('navbar', {to: 'navbar'});\n    this.render('website_list', {to: 'main', data: {websites: search_result}});\n});\n\nTemplate.registerHelper('formatDate', function(date) {\n    return date.toLocaleDateString();\n});\n\n/// acounts config\nAccounts.ui.config({\n    passwordSignupFields: \"EMAIL\"\n});\n\nTemplate.website_list.events({\n    \"click .js-upvote\":function(event) {\n        var website_id = this._id;\n        console.log(\"Up voting website with id \"+website_id);\n        old_rating = Websites.findOne({_id: website_id}).rating;\n        if(old_rating == undefined) {\n            old_rating = 0;\n        }\n        console.log(\"Site value is \" + old_rating);\n        if(Meteor.user()) {\n            Websites.update({_id: website_id}, {$set: {rating: old_rating + 1}});\n        }\n        else {\n            $('#modal-dialog').modal('show');\n        }\n\n        return false;\n    },\n    \"click .js-downvote\":function(event) {\n        var website_id = this._id;\n        console.log(\"Down voting website with id \"+website_id);\n\n        old_rating = Websites.findOne({_id: website_id}).rating;\n        if(old_rating == undefined) {\n            old_rating = 0;\n        }\n        console.log(\"Site value is \" + old_rating);\n        if(Meteor.user()) {\n            Websites.update({_id: website_id}, {$set: {rating: old_rating - 1}});\n        }\n        else {\n            $('#modal-dialog').modal('show');\n        }\n\n        return false;\n    }\n})\n\nTemplate.website_form.events({\n    \"click .js-toggle-website-form\":function(event){\n        $(\"#website_form\").toggle('slow');\n    },\n    \"submit .js-save-website-form\":function(event){\n        var url = event.target.url.value;\n        console.log(\"The url they entered is: \"+url);\n\n        if(Meteor.user()) {\n            Websites.insert({\n                url: event.target.url.value,\n                title: event.target.title.value,\n                description: event.target.description.value,\n                createdBy: Meteor.user().username,\n                createdOn: new Date()\n            });\n        }\n        else {\n            $('#modal-dialog').modal('show');\n        }\n\n        $(\"#website_form\").toggle('slow');\n\n        return false;\n    }\n});\n\nTemplate.website_detail.events({\n    \"submit .js-save-comment-form\": function(event) {\n        var website_id = this._id;\n        if(Meteor.user()) {\n            console.log(this._id);\n            Comments.insert({\n                website_id: website_id,\n                comment: event.target.comment.value,\n                createdBy: Meteor.user().username,\n                createdOn: new Date()\n            });\n        }\n        else {\n            $('#modal-dialog').modal('show');\n        }\n        \n        return false;\n    },\n\n});\n\nTemplate.navbar.events({\n    \"submit .js-search-form\": function(event) {\n        console.log('/search/' + event.target.search.value);\n        Router.go('/search/' + event.target.search.value);\n        return false;\n    },\n});","Websites = new Mongo.Collection(\"websites\");\r\n\r\nComments = new Mongo.Collection(\"Comments\");\r\n\r\n"]}}]