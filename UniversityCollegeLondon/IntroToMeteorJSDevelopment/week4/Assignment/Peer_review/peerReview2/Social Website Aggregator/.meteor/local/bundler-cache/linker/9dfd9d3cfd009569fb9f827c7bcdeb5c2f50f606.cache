[{"type":"js","data":"/* Imports for global scope */\n\nMongo = Package.mongo.Mongo;\nReactiveVar = Package['reactive-var'].ReactiveVar;\n$ = Package.jquery.$;\njQuery = Package.jquery.jQuery;\nTracker = Package.tracker.Tracker;\nDeps = Package.tracker.Deps;\nRouter = Package['iron:router'].Router;\nRouteController = Package['iron:router'].RouteController;\nHTTP = Package.http.HTTP;\nmoment = Package['momentjs:moment'].moment;\nMeteor = Package.meteor.Meteor;\nglobal = Package.meteor.global;\nmeteorEnv = Package.meteor.meteorEnv;\nWebApp = Package.webapp.WebApp;\n_ = Package.underscore._;\nDDP = Package['ddp-client'].DDP;\nLaunchScreen = Package['launch-screen'].LaunchScreen;\nBlaze = Package.ui.Blaze;\nUI = Package.ui.UI;\nHandlebars = Package.ui.Handlebars;\nSpacebars = Package.spacebars.Spacebars;\nTemplate = Package.templating.Template;\nmeteorInstall = Package.modules.meteorInstall;\nBuffer = Package.modules.Buffer;\nprocess = Package.modules.process;\nSymbol = Package['ecmascript-runtime'].Symbol;\nMap = Package['ecmascript-runtime'].Map;\nSet = Package['ecmascript-runtime'].Set;\nmeteorBabelHelpers = Package['babel-runtime'].meteorBabelHelpers;\nPromise = Package.promise.Promise;\nIron = Package['iron:core'].Iron;\nAccounts = Package['accounts-base'].Accounts;\nAutoupdate = Package.autoupdate.Autoupdate;\nReload = Package.reload.Reload;\nHTML = Package.htmljs.HTML;\n\n","servePath":"/packages/global-imports.js"},{"type":"js","data":"var require = meteorInstall({\"client\":{\"template.main.js\":function(){\n\n///////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                       //\n// client/template.main.js                                                               //\n//                                                                                       //\n///////////////////////////////////////////////////////////////////////////////////////////\n                                                                                         //\n                                                                                         // 1\nTemplate.body.addContent((function() {                                                   // 2\n  var view = this;                                                                       // 3\n  return \"\";                                                                             // 4\n}));                                                                                     // 5\nMeteor.startup(Template.body.renderToDocument);                                          // 6\n                                                                                         // 7\nTemplate.__checkName(\"ApplicationLayout\");                                               // 8\nTemplate[\"ApplicationLayout\"] = new Template(\"Template.ApplicationLayout\", (function() {\n  var view = this;                                                                       // 10\n  return [ Blaze._TemplateWith(function() {                                              // 11\n    return \"navbar\";                                                                     // 12\n  }, function() {                                                                        // 13\n    return Spacebars.include(view.lookupTemplate(\"yield\"));                              // 14\n  }), \"\\n    \", HTML.DIV({                                                               // 15\n    \"class\": \"container\"                                                                 // 16\n  }, \"\\n        \", Blaze._TemplateWith(function() {                                      // 17\n    return \"website_form\";                                                               // 18\n  }, function() {                                                                        // 19\n    return Spacebars.include(view.lookupTemplate(\"yield\"));                              // 20\n  }), \"\\n        \", Blaze._TemplateWith(function() {                                     // 21\n    return \"main\";                                                                       // 22\n  }, function() {                                                                        // 23\n    return Spacebars.include(view.lookupTemplate(\"yield\"));                              // 24\n  }), \"\\n        \", Blaze._TemplateWith(function() {                                     // 25\n    return \"comments\";                                                                   // 26\n  }, function() {                                                                        // 27\n    return Spacebars.include(view.lookupTemplate(\"yield\"));                              // 28\n  }), \"\\n        \\n    \") ];                                                             // 29\n}));                                                                                     // 30\n                                                                                         // 31\nTemplate.__checkName(\"navbar\");                                                          // 32\nTemplate[\"navbar\"] = new Template(\"Template.navbar\", (function() {                       // 33\n  var view = this;                                                                       // 34\n  return HTML.NAV({                                                                      // 35\n    \"class\": \"navbar navbar-default\"                                                     // 36\n  }, \"\\n      \", HTML.DIV({                                                              // 37\n    \"class\": \"container-fluid\"                                                           // 38\n  }, \"\\n        \", HTML.Raw('<div class=\"navbar-header\">\\n            <a class=\"navbar-brand\" href=\"/\">Site Ace </a>\\n        </div>'), \"\\n        \", HTML.Raw('<form class=\"navbar-form navbar-right js-search-form\">\\n        <input type=\"text\" id=\"search\">\\n        <button type=\"submit\">Search</button>\\n      </form>'), \"\\n          \", Blaze._TemplateWith(function() {\n    return {                                                                             // 40\n      align: Spacebars.call(\"right\")                                                     // 41\n    };                                                                                   // 42\n  }, function() {                                                                        // 43\n    return Spacebars.include(view.lookupTemplate(\"loginButtons\"));                       // 44\n  }), \"\\n      \"), \"\\n    \");                                                            // 45\n}));                                                                                     // 46\n                                                                                         // 47\nTemplate.__checkName(\"website_form\");                                                    // 48\nTemplate[\"website_form\"] = new Template(\"Template.website_form\", (function() {           // 49\n  var view = this;                                                                       // 50\n  return HTML.Raw('<a class=\"btn btn-default js-toggle-website-form\" href=\"#\">\\n        <span class=\"glyphicon glyphicon-plus\" aria-hidden=\"true\"></span>\\n    </a>\\n    <div id=\"website_form\" class=\"hidden_div\">\\n        <form class=\"js-save-website-form\">\\n          <div class=\"form-group\">\\n            <label for=\"url\">Site address</label>\\n            <input type=\"text\" class=\"form-control\" id=\"url\" placeholder=\"http://www.mysite.com\">\\n          </div>\\n          <div class=\"form-group\">\\n            <label for=\"title\">Title</label>\\n            <input type=\"text\" class=\"form-control\" id=\"title\" placeholder=\"Mysite\">\\n          </div>\\n          <div class=\"form-group\">\\n            <label for=\"description\">Description</label>\\n            <input type=\"text\" class=\"form-control\" id=\"description\" placeholder=\"I found this site really useful for ...\">\\n          </div>\\n\\n          <button type=\"submit\" class=\"btn btn-default\">Submit</button>\\n        </form>\\n    </div>');\n}));                                                                                     // 52\n                                                                                         // 53\nTemplate.__checkName(\"website_list\");                                                    // 54\nTemplate[\"website_list\"] = new Template(\"Template.website_list\", (function() {           // 55\n  var view = this;                                                                       // 56\n  return HTML.DIV(\"\\n    \", Blaze.Each(function() {                                      // 57\n    return Spacebars.call(view.lookup(\"websites\"));                                      // 58\n  }, function() {                                                                        // 59\n    return [ \"\\n    \", HTML.DIV({                                                        // 60\n      \"class\": \"card\"                                                                    // 61\n    }, \"\\n      \", HTML.SPAN({                                                           // 62\n      \"class\": \"rank\"                                                                    // 63\n    }, Blaze.View(\"lookup:@index\", function() {                                          // 64\n      return Spacebars.mustache(view.lookup(\"@index\"));                                  // 65\n    })), \"\\n      \", HTML.DIV({                                                          // 66\n      \"class\": \"column-middle\"                                                           // 67\n    }, \"\\n        \", HTML.A({                                                            // 68\n      href: \"#\",                                                                         // 69\n      \"class\": \"js-upvote\"                                                               // 70\n    }, \"\\n          \", HTML.SPAN({                                                       // 71\n      \"class\": \"glyphicon glyphicon-arrow-up\",                                           // 72\n      \"aria-hidden\": \"true\"                                                              // 73\n    }), \"\\n        \"), \"\\n        \", HTML.SPAN(Blaze.If(function() {                     // 74\n      return Spacebars.call(view.lookup(\"rating\"));                                      // 75\n    }, function() {                                                                      // 76\n      return Blaze.View(\"lookup:rating\", function() {                                    // 77\n        return Spacebars.mustache(view.lookup(\"rating\"));                                // 78\n      });                                                                                // 79\n    }, function() {                                                                      // 80\n      return \"0\";                                                                        // 81\n    })), \"\\n        \", HTML.A({                                                          // 82\n      href: \"#\",                                                                         // 83\n      \"class\": \"js-downvote\"                                                             // 84\n    }, \"\\n          \", HTML.SPAN({                                                       // 85\n      \"class\": \"glyphicon glyphicon-arrow-down\",                                         // 86\n      \"aria-hidden\": \"true\"                                                              // 87\n    }), \"\\n        \"), \"\\n      \"), \"\\n      \", HTML.DIV({                               // 88\n      \"class\": \"column-right\"                                                            // 89\n    }, \"\\n        \", HTML.P(HTML.A({                                                     // 90\n      href: function() {                                                                 // 91\n        return [ \"/site/\", Spacebars.mustache(view.lookup(\"_id\")) ];                     // 92\n      }                                                                                  // 93\n    }, Blaze.View(\"lookup:title\", function() {                                           // 94\n      return Spacebars.mustache(view.lookup(\"title\"));                                   // 95\n    })), \" \", HTML.A({                                                                   // 96\n      href: function() {                                                                 // 97\n        return Spacebars.mustache(view.lookup(\"url\"));                                   // 98\n      }                                                                                  // 99\n    }, HTML.CharRef({                                                                    // 100\n      html: \"&gt;\",                                                                      // 101\n      str: \">\"                                                                           // 102\n    }), HTML.CharRef({                                                                   // 103\n      html: \"&gt;\",                                                                      // 104\n      str: \">\"                                                                           // 105\n    }))), \"\\n        \", HTML.P(Blaze.View(\"lookup:description\", function() {             // 106\n      return Spacebars.mustache(view.lookup(\"description\"));                             // 107\n    })), \"\\n        \", HTML.P({                                                          // 108\n      \"class\": \"tagline\"                                                                 // 109\n    }, \"submitted \", Blaze.View(\"lookup:formatDate\", function() {                        // 110\n      return Spacebars.mustache(view.lookup(\"formatDate\"), view.lookup(\"createdOn\"));    // 111\n    }), \" by \", Blaze.If(function() {                                                    // 112\n      return Spacebars.call(view.lookup(\"createdBy\"));                                   // 113\n    }, function() {                                                                      // 114\n      return Blaze.View(\"lookup:createdBy\", function() {                                 // 115\n        return Spacebars.mustache(view.lookup(\"createdBy\"));                             // 116\n      });                                                                                // 117\n    }, function() {                                                                      // 118\n      return \"anonymous\";                                                                // 119\n    })), \"\\n      \"), \"\\n      \", HTML.Comment(\" you will be putting your up and down vote buttons in here! \"), \"\\n    \"), \"\\n    \" ];\n  }), \"\\n  \");                                                                           // 121\n}));                                                                                     // 122\n                                                                                         // 123\nTemplate.__checkName(\"website_item\");                                                    // 124\nTemplate[\"website_item\"] = new Template(\"Template.website_item\", (function() {           // 125\n  var view = this;                                                                       // 126\n  return \"\";                                                                             // 127\n}));                                                                                     // 128\n                                                                                         // 129\nTemplate.__checkName(\"website_detail\");                                                  // 130\nTemplate[\"website_detail\"] = new Template(\"Template.website_detail\", (function() {       // 131\n  var view = this;                                                                       // 132\n  return [ HTML.H2(HTML.A({                                                              // 133\n    href: function() {                                                                   // 134\n      return Spacebars.mustache(view.lookup(\"url\"));                                     // 135\n    }                                                                                    // 136\n  }, Blaze.View(\"lookup:title\", function() {                                             // 137\n    return Spacebars.mustache(view.lookup(\"title\"));                                     // 138\n  }))), \"\\n  \", HTML.DIV({                                                               // 139\n    \"class\": \"site-detail\"                                                               // 140\n  }, \"\\n    \", HTML.P({                                                                  // 141\n    \"class\": \"tagline\"                                                                   // 142\n  }, \"submitted \", Blaze.View(\"lookup:formatDate\", function() {                          // 143\n    return Spacebars.mustache(view.lookup(\"formatDate\"), view.lookup(\"createdOn\"));      // 144\n  }), \" by \", Blaze.If(function() {                                                      // 145\n    return Spacebars.call(view.lookup(\"createdBy\"));                                     // 146\n  }, function() {                                                                        // 147\n    return Blaze.View(\"lookup:createdBy\", function() {                                   // 148\n      return Spacebars.mustache(view.lookup(\"createdBy\"));                               // 149\n    });                                                                                  // 150\n  }, function() {                                                                        // 151\n    return \"anonymous\";                                                                  // 152\n  })), \"\\n    \", HTML.P(Blaze.View(\"lookup:description\", function() {                    // 153\n    return Spacebars.mustache(view.lookup(\"description\"));                               // 154\n  })), \"\\n  \"), \"\\n  \", HTML.DIV({                                                       // 155\n    id: \"comment-form\",                                                                  // 156\n    \"class\": \"card\"                                                                      // 157\n  }, \"\\n    \", HTML.Raw(\"<h3>Add your comment</h3>\"), \"\\n    \", HTML.FORM({              // 158\n    \"class\": \"js-save-comment-form\"                                                      // 159\n  }, \"\\n      \", HTML.DIV({                                                              // 160\n    \"class\": \"form-group\"                                                                // 161\n  }, \"\\n        \", HTML.TEXTAREA({                                                       // 162\n    id: \"comment\",                                                                       // 163\n    \"class\": \"form-control\",                                                             // 164\n    placeholder: \"Add your comment.\"                                                     // 165\n  }), \"\\n      \"), \"\\n      \", HTML.Raw('<button type=\"submit\" class=\"btn btn-default\">Submit</button>'), \"\\n    \"), \"\\n  \") ];\n}));                                                                                     // 167\n                                                                                         // 168\nTemplate.__checkName(\"website_comments\");                                                // 169\nTemplate[\"website_comments\"] = new Template(\"Template.website_comments\", (function() {   // 170\n  var view = this;                                                                       // 171\n  return HTML.DIV({                                                                      // 172\n    \"class\": \"comments card\"                                                             // 173\n  }, HTML.Raw(\"\\n    <h3>Comments:</h3>\\n    \"), Blaze.Each(function() {                 // 174\n    return Spacebars.call(view.lookup(\"comments\"));                                      // 175\n  }, function() {                                                                        // 176\n    return [ \"\\n    \", HTML.DIV({                                                        // 177\n      \"class\": \"comment\"                                                                 // 178\n    }, \"\\n      \", HTML.P({                                                              // 179\n      \"class\": \"tagline\"                                                                 // 180\n    }, \"submitted \", Blaze.View(\"lookup:formatDate\", function() {                        // 181\n      return Spacebars.mustache(view.lookup(\"formatDate\"), view.lookup(\"createdOn\"));    // 182\n    }), \" by \", Blaze.If(function() {                                                    // 183\n      return Spacebars.call(view.lookup(\"createdBy\"));                                   // 184\n    }, function() {                                                                      // 185\n      return Blaze.View(\"lookup:createdBy\", function() {                                 // 186\n        return Spacebars.mustache(view.lookup(\"createdBy\"));                             // 187\n      });                                                                                // 188\n    }, function() {                                                                      // 189\n      return \"anonymous\";                                                                // 190\n    })), \"\\n      \", HTML.P(Blaze.View(\"lookup:comment\", function() {                    // 191\n      return Spacebars.mustache(view.lookup(\"comment\"));                                 // 192\n    })), \"\\n    \"), \"\\n    \" ];                                                          // 193\n  }), \"\\n  \");                                                                           // 194\n}));                                                                                     // 195\n                                                                                         // 196\n///////////////////////////////////////////////////////////////////////////////////////////\n\n},\"main.js\":function(){\n\n///////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                       //\n// client/main.js                                                                        //\n//                                                                                       //\n///////////////////////////////////////////////////////////////////////////////////////////\n                                                                                         //\nAccounts.ui.config({                                                                     // 1\n    passwordSignupFields: \"USERNAME_AND_EMAIL\"                                           // 2\n});                                                                                      // 1\n                                                                                         //\nRouter.configure({                                                                       // 6\n    layoutTemplate: 'ApplicationLayout'                                                  // 7\n});                                                                                      // 6\n                                                                                         //\nRouter.route('/', function () {                                                          // 10\n    this.render('navbar', {                                                              // 11\n        to: 'navbar' // The name of the main placeholder in applicationLayout            // 12\n    });                                                                                  // 11\n    this.render('website_form', {                                                        // 14\n        to: 'form'                                                                       // 15\n    });                                                                                  // 14\n                                                                                         //\n    this.render('website_item', {                                                        // 18\n        to: 'main',                                                                      // 19\n        data: function () {                                                              // 20\n            function data() {                                                            // 20\n                return Websites.findOne({ _id: this.params._id });                       // 21\n            }                                                                            // 22\n                                                                                         //\n            return data;                                                                 // 20\n        }()                                                                              // 20\n    });                                                                                  // 18\n    this.render('comments_list', {                                                       // 24\n        to: 'comments'                                                                   // 25\n    });                                                                                  // 24\n    this.render('comment_form', {                                                        // 27\n        to: 'comment'                                                                    // 28\n    });                                                                                  // 27\n});                                                                                      // 30\n                                                                                         //\nTemplate.website_item.events({                                                           // 32\n    \"click .js-upvote\": function () {                                                    // 33\n        function clickJsUpvote(event) {                                                  // 33\n            // example of how you can access the id for the website in the database      //\n            // (this is the data context for the template)                               //\n            var website_id = this._id;                                                   // 36\n            console.log(\"Up voting website with id \" + website_id);                      // 37\n            // put the code in here to add a vote to a website!                          //\n                                                                                         //\n            return false; // prevent the button from reloading the page                  // 40\n        }                                                                                // 41\n                                                                                         //\n        return clickJsUpvote;                                                            // 33\n    }(),                                                                                 // 33\n    \"click .js-downvote\": function () {                                                  // 42\n        function clickJsDownvote(event) {                                                // 42\n                                                                                         //\n            // example of how you can access the id for the website in the database      //\n            // (this is the data context for the template)                               //\n            var website_id = this._id;                                                   // 46\n            console.log(\"Down voting website with id \" + website_id);                    // 47\n                                                                                         //\n            // put the code in here to remove a vote from a website!                     //\n                                                                                         //\n            return false; // prevent the button from reloading the page                  // 51\n        }                                                                                // 52\n                                                                                         //\n        return clickJsDownvote;                                                          // 42\n    }()                                                                                  // 42\n});                                                                                      // 32\n                                                                                         //\nTemplate.website_form.events({                                                           // 55\n    \"click .js-toggle-website-form\": function () {                                       // 56\n        function clickJsToggleWebsiteForm(event) {                                       // 56\n            $(\"#website_form\").toggle('slow');                                           // 57\n        }                                                                                // 58\n                                                                                         //\n        return clickJsToggleWebsiteForm;                                                 // 56\n    }(),                                                                                 // 56\n    \"submit .js-save-website-form\": function () {                                        // 59\n        function submitJsSaveWebsiteForm(event) {                                        // 59\n                                                                                         //\n            if (Meteor.user()) {                                                         // 61\n                Meteor.user().username;                                                  // 62\n            } else {                                                                     // 63\n                alert('You need to be logged in to submit websites!');                   // 65\n            }                                                                            // 66\n                                                                                         //\n            return false;                                                                // 68\n                                                                                         //\n            // here is an example of how to get the url out of the form:                 //\n            var url = event.target.url.value;                                            // 72\n            console.log(\"The url they entered is: \" + url);                              // 73\n                                                                                         //\n            //  put your website saving code in here!                                    //\n            Meteor.call(\"getWebsiteData\", url, function (error, results) {               // 76\n                                                                                         //\n                // Dump the markup into a dummy element for jQuery manipulation          //\n                var el = $('');                                                          // 79\n                el.html(results.content);                                                // 80\n                                                                                         //\n                // Get the meta data                                                     //\n                var title = $('title', el).text();                                       // 83\n                var description = $('meta[name=\"description\"]', el).attr('content');     // 84\n                                                                                         //\n                // Add the new website in the Websites collection                        //\n                Websites.insert({                                                        // 87\n                    title: title,                                                        // 88\n                    url: url,                                                            // 89\n                    description: description,                                            // 90\n                    createdOn: new Date(),                                               // 91\n                    user: \"Anonymous\", // Use Meteor.user()._id in main.js               // 92\n                    up: 0,                                                               // 93\n                    down: 0                                                              // 94\n                });                                                                      // 87\n            });                                                                          // 96\n                                                                                         //\n            return false; // stop the form submit from reloading the page                // 98\n        }                                                                                // 100\n                                                                                         //\n        return submitJsSaveWebsiteForm;                                                  // 59\n    }()                                                                                  // 59\n});                                                                                      // 55\n                                                                                         //\nTemplate.ApplicationLayout.events({                                                      // 103\n    \"click .js-upvote\": function () {                                                    // 104\n        function clickJsUpvote(event) {                                                  // 104\n            // example of how you can access the id for the website in the database      //\n            // (this is the data context for the template)                               //\n            var website_id = this._id;                                                   // 107\n            console.log(\"Up voting website with id \" + website_id);                      // 108\n                                                                                         //\n            // put the code in here to add a vote to a website!                          //\n            Websites.update({ _id: website_id }, { $set: { up: this.up + 1 } });         // 111\n                                                                                         //\n            return false; // prevent the button from reloading the page                  // 114\n        }                                                                                // 115\n                                                                                         //\n        return clickJsUpvote;                                                            // 104\n    }(),                                                                                 // 104\n    \"click .js-downvote\": function () {                                                  // 116\n        function clickJsDownvote(event) {                                                // 116\n                                                                                         //\n            // example of how you can access the id for the website in the database      //\n            // (this is the data context for the template)                               //\n            var website_id = this._id;                                                   // 120\n            console.log(\"Down voting website with id \" + website_id);                    // 121\n                                                                                         //\n            // put the code in here to remove a vote from a website!                     //\n            Websites.update({ _id: website_id }, { $set: { down: this.down + 1 } });     // 124\n                                                                                         //\n            return false; // prevent the button from reloading the page                  // 127\n        }                                                                                // 128\n                                                                                         //\n        return clickJsDownvote;                                                          // 116\n    }()                                                                                  // 116\n});                                                                                      // 103\n                                                                                         //\n// format the date                                                                       //\nTemplate.registerHelper('formattedDate', function () {                                   // 132\n    return moment(this.createdOn).format(\"MM/DD/YYYY\"); // or whatever format you prefer\n});                                                                                      // 134\n                                                                                         //\nTemplate.website_list.helpers({                                                          // 136\n    websites: function () {                                                              // 137\n        function websites() {                                                            // 137\n            return Websites.find({}, { sort: { up: -1 } });                              // 138\n        }                                                                                // 139\n                                                                                         //\n        return websites;                                                                 // 137\n    }()                                                                                  // 137\n});                                                                                      // 136\n                                                                                         //\nTemplate.registerHelper('getUser', function (userId) {                                   // 142\n    var user = Meteor.users.findOne({ _id: userId });                                    // 143\n    if (user) {                                                                          // 144\n        return user.username;                                                            // 145\n    } else {                                                                             // 146\n        return \"anonymous\";                                                              // 148\n    }                                                                                    // 149\n});                                                                                      // 150\nTemplate.comment_form.events({                                                           // 151\n    \"submit .js-save-comment-form\": function () {                                        // 152\n        function submitJsSaveCommentForm(event) {                                        // 152\n                                                                                         //\n            if (Meteor.user()) {                                                         // 154\n                                                                                         //\n                // here is an example of how to get the comment out of the form:         //\n                var comment = event.target.comment.value;                                // 157\n                console.log(\"The comment they entered is: \" + comment);                  // 158\n                                                                                         //\n                Comments.insert({                                                        // 160\n                    website: Router.current().params._id,                                // 161\n                    comment: comment,                                                    // 162\n                    createdOn: new Date(),                                               // 163\n                    user: Meteor.user().username                                         // 164\n                });                                                                      // 160\n            } else {                                                                     // 166\n                alert('You need to be logged in to submit comments!');                   // 168\n            }                                                                            // 169\n                                                                                         //\n            return false; // stop the form submit from reloading the page                // 171\n        }                                                                                // 173\n                                                                                         //\n        return submitJsSaveCommentForm;                                                  // 152\n    }()                                                                                  // 152\n});                                                                                      // 151\n                                                                                         //\nTemplate.comments_list.helpers({                                                         // 176\n    comments: function () {                                                              // 177\n        function comments() {                                                            // 177\n            return Comments.find({ website: Router.current().params._id });              // 178\n        }                                                                                // 179\n                                                                                         //\n        return comments;                                                                 // 177\n    }()                                                                                  // 177\n});                                                                                      // 176\n///////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"lib\":{\"collections.js\":function(){\n\n///////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                       //\n// lib/collections.js                                                                    //\n//                                                                                       //\n///////////////////////////////////////////////////////////////////////////////////////////\n                                                                                         //\nWebsites = new Mongo.Collection(\"websites\");                                             // 1\n                                                                                         //\nComments = new Mongo.Collection(\"comments\");                                             // 3\n///////////////////////////////////////////////////////////////////////////////////////////\n\n}}},{\"extensions\":[\".js\",\".json\",\".html\",\".css\"]});\nrequire(\"./client/template.main.js\");\nrequire(\"./lib/collections.js\");\nrequire(\"./client/main.js\");","servePath":"/app.js","sourceMap":{"version":3,"sources":["/client/template.main.js","/client/main.js","/lib/collections.js"],"names":[],"mappings":";;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+F;;;;;;;;;;;ACnMA,SAAS,EAAT,CAAY,MAAZ,CAAmB;AACf,0BAAsB;AADP,CAAnB;;AAKA,OAAO,SAAP,CAAiB;AACb,oBAAgB;AADH,CAAjB;;AAIA,OAAO,KAAP,CAAa,GAAb,EAAkB,YAAY;AAC1B,SAAK,MAAL,CAAY,QAAZ,EAAsB;AAClB,YAAI,Q;AADc,KAAtB;AAGA,S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","file":"/app.js","sourcesContent":["\nTemplate.body.addContent((function() {\n  var view = this;\n  return \"\";\n}));\nMeteor.startup(Template.body.renderToDocument);\n\nTemplate.__checkName(\"ApplicationLayout\");\nTemplate[\"ApplicationLayout\"] = new Template(\"Template.ApplicationLayout\", (function() {\n  var view = this;\n  return [ Blaze._TemplateWith(function() {\n    return \"navbar\";\n  }, function() {\n    return Spacebars.include(view.lookupTemplate(\"yield\"));\n  }), \"\\n    \", HTML.DIV({\n    \"class\": \"container\"\n  }, \"\\n        \", Blaze._TemplateWith(function() {\n    return \"website_form\";\n  }, function() {\n    return Spacebars.include(view.lookupTemplate(\"yield\"));\n  }), \"\\n        \", Blaze._TemplateWith(function() {\n    return \"main\";\n  }, function() {\n    return Spacebars.include(view.lookupTemplate(\"yield\"));\n  }), \"\\n        \", Blaze._TemplateWith(function() {\n    return \"comments\";\n  }, function() {\n    return Spacebars.include(view.lookupTemplate(\"yield\"));\n  }), \"\\n        \\n    \") ];\n}));\n\nTemplate.__checkName(\"navbar\");\nTemplate[\"navbar\"] = new Template(\"Template.navbar\", (function() {\n  var view = this;\n  return HTML.NAV({\n    \"class\": \"navbar navbar-default\"\n  }, \"\\n      \", HTML.DIV({\n    \"class\": \"container-fluid\"\n  }, \"\\n        \", HTML.Raw('<div class=\"navbar-header\">\\n            <a class=\"navbar-brand\" href=\"/\">Site Ace </a>\\n        </div>'), \"\\n        \", HTML.Raw('<form class=\"navbar-form navbar-right js-search-form\">\\n        <input type=\"text\" id=\"search\">\\n        <button type=\"submit\">Search</button>\\n      </form>'), \"\\n          \", Blaze._TemplateWith(function() {\n    return {\n      align: Spacebars.call(\"right\")\n    };\n  }, function() {\n    return Spacebars.include(view.lookupTemplate(\"loginButtons\"));\n  }), \"\\n      \"), \"\\n    \");\n}));\n\nTemplate.__checkName(\"website_form\");\nTemplate[\"website_form\"] = new Template(\"Template.website_form\", (function() {\n  var view = this;\n  return HTML.Raw('<a class=\"btn btn-default js-toggle-website-form\" href=\"#\">\\n        <span class=\"glyphicon glyphicon-plus\" aria-hidden=\"true\"></span>\\n    </a>\\n    <div id=\"website_form\" class=\"hidden_div\">\\n        <form class=\"js-save-website-form\">\\n          <div class=\"form-group\">\\n            <label for=\"url\">Site address</label>\\n            <input type=\"text\" class=\"form-control\" id=\"url\" placeholder=\"http://www.mysite.com\">\\n          </div>\\n          <div class=\"form-group\">\\n            <label for=\"title\">Title</label>\\n            <input type=\"text\" class=\"form-control\" id=\"title\" placeholder=\"Mysite\">\\n          </div>\\n          <div class=\"form-group\">\\n            <label for=\"description\">Description</label>\\n            <input type=\"text\" class=\"form-control\" id=\"description\" placeholder=\"I found this site really useful for ...\">\\n          </div>\\n\\n          <button type=\"submit\" class=\"btn btn-default\">Submit</button>\\n        </form>\\n    </div>');\n}));\n\nTemplate.__checkName(\"website_list\");\nTemplate[\"website_list\"] = new Template(\"Template.website_list\", (function() {\n  var view = this;\n  return HTML.DIV(\"\\n    \", Blaze.Each(function() {\n    return Spacebars.call(view.lookup(\"websites\"));\n  }, function() {\n    return [ \"\\n    \", HTML.DIV({\n      \"class\": \"card\"\n    }, \"\\n      \", HTML.SPAN({\n      \"class\": \"rank\"\n    }, Blaze.View(\"lookup:@index\", function() {\n      return Spacebars.mustache(view.lookup(\"@index\"));\n    })), \"\\n      \", HTML.DIV({\n      \"class\": \"column-middle\"\n    }, \"\\n        \", HTML.A({\n      href: \"#\",\n      \"class\": \"js-upvote\"\n    }, \"\\n          \", HTML.SPAN({\n      \"class\": \"glyphicon glyphicon-arrow-up\",\n      \"aria-hidden\": \"true\"\n    }), \"\\n        \"), \"\\n        \", HTML.SPAN(Blaze.If(function() {\n      return Spacebars.call(view.lookup(\"rating\"));\n    }, function() {\n      return Blaze.View(\"lookup:rating\", function() {\n        return Spacebars.mustache(view.lookup(\"rating\"));\n      });\n    }, function() {\n      return \"0\";\n    })), \"\\n        \", HTML.A({\n      href: \"#\",\n      \"class\": \"js-downvote\"\n    }, \"\\n          \", HTML.SPAN({\n      \"class\": \"glyphicon glyphicon-arrow-down\",\n      \"aria-hidden\": \"true\"\n    }), \"\\n        \"), \"\\n      \"), \"\\n      \", HTML.DIV({\n      \"class\": \"column-right\"\n    }, \"\\n        \", HTML.P(HTML.A({\n      href: function() {\n        return [ \"/site/\", Spacebars.mustache(view.lookup(\"_id\")) ];\n      }\n    }, Blaze.View(\"lookup:title\", function() {\n      return Spacebars.mustache(view.lookup(\"title\"));\n    })), \" \", HTML.A({\n      href: function() {\n        return Spacebars.mustache(view.lookup(\"url\"));\n      }\n    }, HTML.CharRef({\n      html: \"&gt;\",\n      str: \">\"\n    }), HTML.CharRef({\n      html: \"&gt;\",\n      str: \">\"\n    }))), \"\\n        \", HTML.P(Blaze.View(\"lookup:description\", function() {\n      return Spacebars.mustache(view.lookup(\"description\"));\n    })), \"\\n        \", HTML.P({\n      \"class\": \"tagline\"\n    }, \"submitted \", Blaze.View(\"lookup:formatDate\", function() {\n      return Spacebars.mustache(view.lookup(\"formatDate\"), view.lookup(\"createdOn\"));\n    }), \" by \", Blaze.If(function() {\n      return Spacebars.call(view.lookup(\"createdBy\"));\n    }, function() {\n      return Blaze.View(\"lookup:createdBy\", function() {\n        return Spacebars.mustache(view.lookup(\"createdBy\"));\n      });\n    }, function() {\n      return \"anonymous\";\n    })), \"\\n      \"), \"\\n      \", HTML.Comment(\" you will be putting your up and down vote buttons in here! \"), \"\\n    \"), \"\\n    \" ];\n  }), \"\\n  \");\n}));\n\nTemplate.__checkName(\"website_item\");\nTemplate[\"website_item\"] = new Template(\"Template.website_item\", (function() {\n  var view = this;\n  return \"\";\n}));\n\nTemplate.__checkName(\"website_detail\");\nTemplate[\"website_detail\"] = new Template(\"Template.website_detail\", (function() {\n  var view = this;\n  return [ HTML.H2(HTML.A({\n    href: function() {\n      return Spacebars.mustache(view.lookup(\"url\"));\n    }\n  }, Blaze.View(\"lookup:title\", function() {\n    return Spacebars.mustache(view.lookup(\"title\"));\n  }))), \"\\n  \", HTML.DIV({\n    \"class\": \"site-detail\"\n  }, \"\\n    \", HTML.P({\n    \"class\": \"tagline\"\n  }, \"submitted \", Blaze.View(\"lookup:formatDate\", function() {\n    return Spacebars.mustache(view.lookup(\"formatDate\"), view.lookup(\"createdOn\"));\n  }), \" by \", Blaze.If(function() {\n    return Spacebars.call(view.lookup(\"createdBy\"));\n  }, function() {\n    return Blaze.View(\"lookup:createdBy\", function() {\n      return Spacebars.mustache(view.lookup(\"createdBy\"));\n    });\n  }, function() {\n    return \"anonymous\";\n  })), \"\\n    \", HTML.P(Blaze.View(\"lookup:description\", function() {\n    return Spacebars.mustache(view.lookup(\"description\"));\n  })), \"\\n  \"), \"\\n  \", HTML.DIV({\n    id: \"comment-form\",\n    \"class\": \"card\"\n  }, \"\\n    \", HTML.Raw(\"<h3>Add your comment</h3>\"), \"\\n    \", HTML.FORM({\n    \"class\": \"js-save-comment-form\"\n  }, \"\\n      \", HTML.DIV({\n    \"class\": \"form-group\"\n  }, \"\\n        \", HTML.TEXTAREA({\n    id: \"comment\",\n    \"class\": \"form-control\",\n    placeholder: \"Add your comment.\"\n  }), \"\\n      \"), \"\\n      \", HTML.Raw('<button type=\"submit\" class=\"btn btn-default\">Submit</button>'), \"\\n    \"), \"\\n  \") ];\n}));\n\nTemplate.__checkName(\"website_comments\");\nTemplate[\"website_comments\"] = new Template(\"Template.website_comments\", (function() {\n  var view = this;\n  return HTML.DIV({\n    \"class\": \"comments card\"\n  }, HTML.Raw(\"\\n    <h3>Comments:</h3>\\n    \"), Blaze.Each(function() {\n    return Spacebars.call(view.lookup(\"comments\"));\n  }, function() {\n    return [ \"\\n    \", HTML.DIV({\n      \"class\": \"comment\"\n    }, \"\\n      \", HTML.P({\n      \"class\": \"tagline\"\n    }, \"submitted \", Blaze.View(\"lookup:formatDate\", function() {\n      return Spacebars.mustache(view.lookup(\"formatDate\"), view.lookup(\"createdOn\"));\n    }), \" by \", Blaze.If(function() {\n      return Spacebars.call(view.lookup(\"createdBy\"));\n    }, function() {\n      return Blaze.View(\"lookup:createdBy\", function() {\n        return Spacebars.mustache(view.lookup(\"createdBy\"));\n      });\n    }, function() {\n      return \"anonymous\";\n    })), \"\\n      \", HTML.P(Blaze.View(\"lookup:comment\", function() {\n      return Spacebars.mustache(view.lookup(\"comment\"));\n    })), \"\\n    \"), \"\\n    \" ];\n  }), \"\\n  \");\n}));\n","Accounts.ui.config({\n    passwordSignupFields: \"USERNAME_AND_EMAIL\"\n});\n\n\nRouter.configure({\n    layoutTemplate: 'ApplicationLayout'\n});\n\nRouter.route('/', function () {\n    this.render('navbar', {\n        to: 'navbar' // The name of the main placeholder in applicationLayout\n    });\n    this.render('website_form', {\n        to: 'form'\n    });\n    \n    this.render('website_item', {\n        to: 'main',\n        data: function() {\n            return Websites.findOne({_id: this.params._id});\n        }\n    });\n    this.render('comments_list', {\n    to: 'comments'\n});\nthis.render('comment_form', {\n    to: 'comment'\n});\n});\n\nTemplate.website_item.events({\n        \"click .js-upvote\":function(event){\n            // example of how you can access the id for the website in the database\n            // (this is the data context for the template)\n            var website_id = this._id;\n            console.log(\"Up voting website with id \"+website_id);\n            // put the code in here to add a vote to a website!\n\n            return false;// prevent the button from reloading the page\n        }, \n        \"click .js-downvote\":function(event){\n\n            // example of how you can access the id for the website in the database\n            // (this is the data context for the template)\n            var website_id = this._id;\n            console.log(\"Down voting website with id \"+website_id);\n\n            // put the code in here to remove a vote from a website!\n\n            return false;// prevent the button from reloading the page\n        }\n    })\n\nTemplate.website_form.events({\n        \"click .js-toggle-website-form\":function(event){\n            $(\"#website_form\").toggle('slow');\n        }, \n        \"submit .js-save-website-form\":function(event){\n\n            if (Meteor.user()) {\n    Meteor.user().username;\n}\nelse {\n        alert('You need to be logged in to submit websites!');\n    }\n\n    return false;\n\n\n            // here is an example of how to get the url out of the form:\n            var url = event.target.url.value;\n            console.log(\"The url they entered is: \"+url);\n            \n            //  put your website saving code in here! \n         Meteor.call(\"getWebsiteData\", url, function(error, results) {\n\n            // Dump the markup into a dummy element for jQuery manipulation\n            var el = $('');\n            el.html(results.content);\n\n            // Get the meta data\n            var title = $('title', el).text();\n            var description = $('meta[name=\"description\"]', el).attr('content');\n\n            // Add the new website in the Websites collection\n            Websites.insert({\n                title: title, \n                url: url, \n                description: description, \n                createdOn:new Date(),\n                user: \"Anonymous\", // Use Meteor.user()._id in main.js\n                up: 0,\n                down: 0\n            })\n        });             \n\n            return false;// stop the form submit from reloading the page\n\n        }\n    });\n\nTemplate.ApplicationLayout.events({\n    \"click .js-upvote\":function(event){\n        // example of how you can access the id for the website in the database\n        // (this is the data context for the template)\n        var website_id = this._id;\n        console.log(\"Up voting website with id \"+website_id);\n\n        // put the code in here to add a vote to a website!\n        Websites.update({_id: website_id},\n                        {$set: {up: this.up + 1}});\n\n        return false;// prevent the button from reloading the page\n    }, \n    \"click .js-downvote\":function(event){\n\n        // example of how you can access the id for the website in the database\n        // (this is the data context for the template)\n        var website_id = this._id;\n        console.log(\"Down voting website with id \"+website_id);\n\n        // put the code in here to remove a vote from a website!\n        Websites.update({_id: website_id},\n                        {$set: {down: this.down + 1}});\n\n        return false;// prevent the button from reloading the page\n    }\n})\n   \n// format the date\nTemplate.registerHelper('formattedDate', function() {\n     return moment(this.createdOn).format(\"MM/DD/YYYY\");  // or whatever format you prefer\n});\n\nTemplate.website_list.helpers({\n    websites:function(){\n        return Websites.find({}, {sort: {up:-1}});\n    }\n});\n\nTemplate.registerHelper('getUser', function(userId) {\n     var user = Meteor.users.findOne({_id: userId});\n    if (user) {\n        return user.username;\n    }\n    else {\n        return \"anonymous\";\n    }\n});\nTemplate.comment_form.events({\n    \"submit .js-save-comment-form\":function(event){\n\n        if (Meteor.user()) {\n\n            // here is an example of how to get the comment out of the form:\n            var comment = event.target.comment.value;\n            console.log(\"The comment they entered is: \"+comment);\n\n            Comments.insert({\n                website: Router.current().params._id, \n                comment: comment, \n                createdOn: new Date(),\n                user: Meteor.user().username\n            });\n        }\n        else {\n            alert('You need to be logged in to submit comments!');\n        }\n\n        return false; // stop the form submit from reloading the page\n\n    }\n});\n\nTemplate.comments_list.helpers({\n    comments:function(){\n        return Comments.find({website: Router.current().params._id});\n    }\n});","Websites = new Mongo.Collection(\"websites\");\r\n\r\nComments = new Mongo.Collection(\"comments\");\r\n\r\n"]}}]